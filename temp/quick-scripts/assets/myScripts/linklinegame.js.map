{"version":3,"sources":["linklinegame.js"],"names":["dataMgr","require","cc","Class","extends","Component","properties","chunkList","chunkTempList","topNode","Node","boardNode","bottomNode","chunkPre","Prefab","chunkAni","graphics","Graphics","pause_scores","levelUp","operateScore","fiveStarNode","blockInputNode1","blockInputNode2","boardNode2","score","canRelive","circleYellow","scoreBgSprFrame1","SpriteFrame","scoreBgSprFrame2","hammerSprFrame1","hammerSprFrame2","hammerSprFrame3","hammerSprFrame4","isHammer","doubleSprFrame1","doubleSprFrame2","doubleSprFrame3","doubleNum","isUsingHammer","isUsingDouble","chunkDropList","star","hammerTips","useHammerRemind","startChunkID","doubleOnce","doubleMode","dropChunkID","progressMgr","progress1","progress2","progress_num","progress_times","breakRecord","kuang1","kuang2","cancel_times","hammer_btn","double_btn","closePl_num","closePlPre","loadingBar","loadingBarNum","levelAni","scoreSprite","scoreNode","evaluate","evaluateSprite","onLoad","linklineinitData","linklineinitChunks","touchPos","myADMgr","setCallback","adCallback","bind","console","log","noAD","start","linklineaddTouchEvent","progressMgrJs","getComponent","act","repeatForever","sequence","spawn","scaleTo","fadeOut","callFunc","setScale","opacity","runAction","active","score2_times","Number","sys","localStorage","getItem","score4_times","linklinestartTimeCount","schedule","linklinetimeCountFun","node","getPositionX","timeCount","tipsTime","linklinetips","audioMgr","find","ROW","COL","chunkRadius","chunkGapX","chunkGapY","gameoverTimes","parseInt","myLocalMgr","restartTimes","hightestScore","doubleModeTimes","limitDis","Math","pow","getChildByName","isFirst","isFirstTimeLoad","blockBlackX","blockBlackY","getPositionY","setItem","Sprite","spriteFrame","presentScore","bestScore","Label","string","toString","circleNumLeft","circleNum1","circleNumRight","circleNum2","circleColorLeft","colorMgr","linklinegetCircleColorByIndex","linklinegetCircleColorLength","circleColorRight","color","levelUpTotal","percentBar","parseFloat","ProgressBar","progress","tempHammer","toUseHammer","doubleBtn","toRelive","isGameOver","self","i","Array","j","linklinerandomChunk","x","y","addChild","setPosition","linklinesaveBoardData","LocalData","linklineloadBoardData","row_col","data","linklinesetColor_Digit","linklinegetColorById","chunkDigit","linklinegetChunkDigit","children","chunk","instantiate","chunkJS","index","colorInd","Color","random","board","on","EventType","TOUCH_START","event","touchStartPos","convertToNodeSpaceAR","getLocation","linklinegraphicsLine","TOUCH_MOVE","touchMovePos","linklinechunk_fingerCollier","TOUCH_END","length","linklinetogetherChunk","linklinedropChunkAct","linklinesetProgressBar","n","clear","stopAllActions","easing","easeBackIn","v2","label","addComponent","num","easeBackOut","font","delayTime","moveBy","destroy","TOUCH_CANCEL","point","pDistance","getPosition","linklinechunk_chunkCollier","chunk1","chunk2","chunk1JS","chunk2JS","point2","sum","push","uuid","linklinesetProgressBarColor","linklineplayAdvanced","chunAni","linklinegetChunkColor","zIndex","isInArray","k","linklineplayConnect_close","vibrate1","splice","linklinelineChunkSum","floor","update","dt","moveTo","lineTo","chunkTempJS","strokeColor","stroke","linklineuploadTime_score","myGameCenterMgr","gameCenter","RANK","SCORE","totalTime","GAME_TIME","str","lineChunkList","linklineplayConnect_up","chunkDigitSum","lastChunk","lastChunkJS","cloneChunk","cloneChunkJS","moveTime","url","raw","linklinediscount","iBk","jBk","linklineplAct","curChunk","curChunkJS","pos","correctSum","num_1k","linklineplayHigh_single_score","isFiveStar","linklinemySlideIn","fiveStar","linklineplayDialog","fadeIn","dialouge_Time","Date","scheduleOnce","linklinebarAct","linklineaddScores","linklineisGameover","setPositionX","linklinegameoverAni","linklineplayRevive","linklinecountTime","linklinecountTime2","AD_CONFIG","DIED_TIMES","isFullScreenAvailable","DIED_PRO","showFullScreenAD","linklinegameEvaluate","linklineaddProgerssBar","linklineuseHammer_giveUp","linklineplayUi_btn","linklinemySlideOut","linklinesupportUs","linklineisNetWork","linklinecloseFiveStarNode","unschedule","count","linklineplayBest_score","levelUp_time","linklinelevelUpFun","linklineplayLevel_up","ParticleSystem","resetSystem","sp","Skeleton","setAnimation","addAnimation","JSON","parse","obj","boardData","stringify","currentChunkJS","upChunkJS","rightChunkJS","label_rank","linklinetipsChunkAction","callFunction","countNumber","row","col","currentChunk","upChunk","downChunk","downChunkJS","leftChunk","leftChunkJS","rightChunk","linklinechunkShake","board2_list","linklinehammer","linklinedouble","linklineboard2Shake","linklineboard2Ani","linklineplayUseHammer","m","linklinesortChunk","tempArray","tempNum","linklineresetBtn","isCount","dropTime1","dropTime","dropChunk","dropChunkJS","linklinehammerBtn","isMobile","isRewardVideoAvailable","showRewardVideoAD","linklinegiveUpBtn","linklinelevelUpSureBtn","DIALOG_PRO","type","name","onCacheAd","os","OS_IOS","typeNetWork","jsb","reflection","callStaticMethod","parent","linklinechunkActStart","linklinechunkAct","chunkNum","showChunk","showChunkJs","linklinecloseDialouge","linklinedoubleButton","linklineplayDouble","removeAllChildren","node1","node2","node3","node4","file","bizier1","bezierTo","stopSystem","bizier2","bizier3","bizier4"],"mappings":"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","file":"linklinegame.js","sourceRoot":"../../../../assets/myScripts","sourcesContent":["var dataMgr = require(\"linklinedataMgr\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        chunkList:[], // 2048 块\r\n        chunkTempList:[], // 存放移动过程中碰到的 块\r\n\r\n        topNode:cc.Node,\r\n        boardNode:cc.Node,\r\n        bottomNode:cc.Node,\r\n\r\n        chunkPre:cc.Prefab,\r\n        chunkAni:cc.Prefab, // 涟漪动画\r\n        \r\n        // 连线组件\r\n        graphics:cc.Graphics,\r\n        // 暂停和分数  节点\r\n        pause_scores:cc.Node,\r\n        // 升级节点\r\n        levelUp:cc.Node,\r\n\r\n        // 当前操作得分 显示 节点\r\n        operateScore:cc.Node,\r\n\r\n        // 五星好评\r\n        fiveStarNode:cc.Node,\r\n\r\n        // 防穿透节点\r\n        blockInputNode1:cc.Node,\r\n        blockInputNode2:cc.Node,\r\n        boardNode2:cc.Node,\r\n\r\n        // 死亡界面 等级、 分数\r\n        //level:cc.Node,\r\n        score:cc.Node,\r\n\r\n        // 复活机会是否使用\r\n        canRelive:true,\r\n        // 复活界面 倒计时\r\n        circleYellow:cc.Node,\r\n\r\n        // 破纪录 和 没破纪录 bg \r\n        scoreBgSprFrame1:cc.SpriteFrame,\r\n        scoreBgSprFrame2:cc.SpriteFrame,\r\n\r\n        //scoreBg:cc.Node,\r\n\r\n        // 锤子 图集\r\n        hammerSprFrame1:cc.SpriteFrame,\r\n        hammerSprFrame2:cc.SpriteFrame,\r\n        hammerSprFrame3:cc.SpriteFrame,\r\n        hammerSprFrame4:cc.SpriteFrame,\r\n        // 锤子是否可用\r\n        isHammer:false,\r\n        //isReviveHammer:false,\r\n\r\n        //double 图集\r\n        doubleSprFrame1:cc.SpriteFrame,\r\n        doubleSprFrame2:cc.SpriteFrame,\r\n        doubleSprFrame3:cc.SpriteFrame,\r\n        \r\n        doubleNum:0,\r\n\r\n        isUsingHammer:false,\r\n        isUsingDouble:false,\r\n\r\n        // 每一列的掉落数据 存到 数组中\r\n        chunkDropList:[],\r\n\r\n        // 星星粒子效果\r\n        star:cc.Node,\r\n\r\n        // 使用锤子道具提示\r\n        hammerTips:cc.Node,\r\n\r\n        // 死亡 锤子 可用提示\r\n        useHammerRemind:cc.Node,\r\n\r\n        //连线起点\r\n        startChunkID:0,\r\n        //双倍分数\r\n        doubleOnce:false,\r\n        //双倍模式\r\n        doubleMode:false,\r\n        //合成块ID\r\n        dropChunkID:0,\r\n\r\n        progressMgr:cc.Node,\r\n        progress1:cc.Node,\r\n        progress2:cc.Node,\r\n\r\n        progress_num:0,\r\n        progress_times:0,\r\n\r\n        breakRecord:false,\r\n\r\n        kuang1:cc.SpriteFrame,\r\n        kuang2:cc.SpriteFrame,\r\n\r\n        cancel_times:0,\r\n\r\n        hammer_btn:cc.Node,\r\n        double_btn:cc.Node,\r\n        // closePl1:cc.ParticleSystem,\r\n        // closePl2:cc.ParticleSystem,\r\n        // closePl3:cc.ParticleSystem,\r\n        // closePl4:cc.ParticleSystem,\r\n        closePl_num:0,\r\n\r\n        closePlPre:cc.Prefab,\r\n\r\n        loadingBar:cc.Node,\r\n        loadingBarNum:1,\r\n        levelAni:cc.Node,\r\n        scoreSprite:[cc.SpriteFrame],\r\n        scoreNode:cc.Node,\r\n\r\n        evaluate:cc.Node,\r\n        evaluateSprite:[cc.SpriteFrame]\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.linklineinitData();\r\n        \r\n        this.linklineinitChunks();\r\n\r\n        this.touchPos = 0\r\n        // 广告回调\r\n        myADMgr.setCallback(this.adCallback.bind(this));\r\n\r\n        console.log(\"noAD: \" + noAD);\r\n\r\n    },\r\n\r\n    start:function(){\r\n        this.linklineaddTouchEvent();\r\n        this.progressMgrJs = this.progressMgr.getComponent('linklineprogressBarMgr');\r\n        let act = cc.repeatForever(cc.sequence(\r\n            cc.spawn(cc.scaleTo(0.5,1.8),cc.fadeOut(0.5)),\r\n            cc.callFunc(function(){\r\n                this.levelAni.setScale(1);\r\n                this.levelAni.opacity = 255;\r\n            },this)\r\n        ))\r\n        this.levelAni.runAction(act);\r\n        this.levelAni.active = false;\r\n        this.score2_times = Number(cc.sys.localStorage.getItem('score2_times'));\r\n        this.score4_times = Number(cc.sys.localStorage.getItem('score4_times'));\r\n    },\r\n    linklinestartTimeCount(){\r\n        this.schedule(this.linklinetimeCountFun,1);\r\n    },\r\n    linklinetimeCountFun(){\r\n        if(this.node.getPositionX() != 0)\r\n            this.timeCount = 0;\r\n        this.timeCount++;\r\n        if(this.timeCount >= this.tipsTime){\r\n            this.linklinetips();\r\n            this.timeCount = 0;\r\n        }\r\n    },\r\n\r\n    // 初始化数据\r\n    linklineinitData:function(){\r\n        this.audioMgr = cc.find(\"Canvas\").getComponent(\"linklineaudioMgr\");\r\n        this.ROW = 6;\r\n        this.COL = 5;\r\n        this.chunkRadius = 34; // chunk半径\r\n        this.chunkGapX = 33//34; // chunk横向间隙\r\n        this.chunkGapY = 28.5//29; // chunk纵向间隙\r\n        this.tipsTime = 5; // 不动棋盘多少秒提示\r\n        this.timeCount = 0; // 计时\r\n        this.gameoverTimes = parseInt(dataMgr.myLocalMgr.gameoverTimes); // 死亡次数\r\n        this.restartTimes = parseInt(dataMgr.myLocalMgr.restartTimes); // 重新开始次数\r\n        this.hightestScore = parseInt(dataMgr.myLocalMgr.hightestScore); // 单次连接最高分\r\n        this.doubleModeTimes = Number(cc.sys.localStorage.getItem('doubleModeTimes'));\r\n\r\n        this.limitDis = Math.pow(2, 0.5)*(2*this.chunkRadius + this.chunkGapX) - this.chunkRadius + 15// 极限距离\r\n        this.graphics = this.boardNode.getChildByName(\"line\").getComponent(cc.Graphics);\r\n        this.isFirst = parseInt(dataMgr.myLocalMgr.isFirstTimeLoad); // 是否第一次登录游戏\r\n        // 点击锤子时棋盘抖动 效果\r\n        this.blockBlackX = this.boardNode2.getPositionX();\r\n        this.blockBlackY = this.boardNode2.getPositionY();\r\n\r\n        if(!cc.sys.localStorage.getItem('doubleNum')){\r\n            this.doubleNum = 1;\r\n            cc.sys.localStorage.setItem('doubleNum',1)\r\n        }\r\n        else{\r\n            this.doubleNum = Number(cc.sys.localStorage.getItem('doubleNum'));\r\n        }\r\n        if(this.doubleNum == 0){\r\n            cc.find('Canvas/game/bottom/double003').getComponent(cc.Sprite).spriteFrame = this.doubleSprFrame2;\r\n        }\r\n        else{\r\n            cc.find('Canvas/game/bottom/double003').getComponent(cc.Sprite).spriteFrame = this.doubleSprFrame1;\r\n        }\r\n        // 恢复分数\r\n        this.presentScore = parseInt(dataMgr.myLocalMgr.presentScore);\r\n        this.bestScore = parseInt(dataMgr.myLocalMgr.bestScore);\r\n        this.pause_scores.getChildByName(\"presentScore\").getChildByName(\"score\").getComponent(cc.Label).string = (this.presentScore).toString();\r\n        this.pause_scores.getChildByName(\"bestScore\").getChildByName(\"score\").getComponent(cc.Label).string = (this.bestScore).toString();\r\n        // 恢复升级进度条\r\n        this.circleNumLeft = parseInt(dataMgr.myLocalMgr.circleNum1);\r\n        this.circleNumRight = parseInt(dataMgr.myLocalMgr.circleNum2);\r\n        this.circleColorLeft = dataMgr.colorMgr.linklinegetCircleColorByIndex(this.circleNumLeft % dataMgr.colorMgr.linklinegetCircleColorLength() + 1);\r\n        this.circleColorRight = dataMgr.colorMgr.linklinegetCircleColorByIndex(this.circleNumRight % dataMgr.colorMgr.linklinegetCircleColorLength() + 1);\r\n        this.levelUp.getChildByName(\"circleLeft\").color = this.circleColorLeft;\r\n\r\n        this.levelUp.getChildByName(\"circleLeft\").getChildByName(\"curLevel\").getComponent(cc.Label).string = (this.circleNumLeft).toString();\r\n        this.levelUp.getChildByName(\"circleRight\").color = this.circleColorRight;\r\n\r\n        this.levelUp.getChildByName(\"circleRight\").getChildByName(\"nextLevel\").getComponent(cc.Label).string = (this.circleNumRight).toString();\r\n\r\n        this.levelUp.getChildByName(\"progressBar\").getChildByName(\"bar\").color = this.circleColorLeft;\r\n        // 连线多少次升级\r\n        if(this.circleNumLeft <6){\r\n            this.levelUpTotal = 30;\r\n            if(this.circleNumLeft == 1)\r\n                this.levelUpTotal = 30;\r\n            if(this.circleNumLeft == 2)\r\n                this.levelUpTotal = 40;\r\n            if(this.circleNumLeft == 3)\r\n                this.levelUpTotal = 50;\r\n            if(this.circleNumLeft == 4)\r\n                this.levelUpTotal = 60;\r\n            if(this.circleNumLeft == 5)\r\n                this.levelUpTotal = 70;\r\n        }\r\n        else{\r\n            this.levelUpTotal = 75 + 5 *(this.circleNumLeft-6);\r\n        }\r\n\r\n        this.percentBar = parseFloat(dataMgr.myLocalMgr.percentBar);\r\n        this.levelUp.getChildByName(\"progressBar\").getComponent(cc.ProgressBar).progress = this.percentBar;\r\n        if(cc.sys.localStorage.getItem('loadingBar_index')){\r\n            this.loadingBarNum = Number(cc.sys.localStorage.getItem('loadingBar_index'))\r\n        }\r\n\r\n        if(cc.sys.localStorage.getItem('canRelive') == null){\r\n            this.canRelive = true;\r\n            cc.sys.localStorage.setItem('canRelive',1);\r\n            console.log('可以复活')\r\n        }\r\n        else{\r\n            this.canRelive = Number(cc.sys.localStorage.getItem('canRelive'));\r\n        }\r\n        // 锤子状态恢复\r\n        if(cc.sys.localStorage.getItem('isHammer') == null){\r\n            this.isHammer = true;\r\n            cc.sys.localStorage.setItem('isHammer',1);\r\n        }\r\n        else{\r\n            this.isHammer = Number(cc.sys.localStorage.getItem('isHammer'));\r\n        }\r\n        if(this.isHammer){\r\n            var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n            tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame1;\r\n        }\r\n        else{\r\n            var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n            tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame2;\r\n        }\r\n        \r\n        this.toUseHammer = false;\r\n        this.doubleBtn = false;\r\n        this.toRelive = false;\r\n\r\n        this.breakRecord = Number(cc.sys.localStorage.getItem('breakRecord'))\r\n        //console.log('是否打破记录' + this.breakRecord)\r\n\r\n    },\r\n\r\n    // 初始化块\r\n    linklineinitChunks:function(){\r\n        if(!cc.sys.localStorage.getItem('isGameOver'))  this.isGameOver = false;\r\n        else{\r\n            this.isGameOver = Number(cc.sys.localStorage.getItem('isGameOver'));\r\n        }\r\n        //console.log(this.isGameOver);\r\n        var self = this;\r\n        // 第一次进入游戏 直接初始化棋盘\r\n        if(this.isFirst || this.isGameOver){\r\n            cc.find('Canvas/game/bottom/double003').getComponent(cc.Sprite).spriteFrame = this.doubleSprFrame1;\r\n            cc.sys.localStorage.setItem('doubleNum',1);\r\n            this.doubleNum = 1;\r\n\r\n            this.breakRecord = false;\r\n            cc.sys.localStorage.setItem('breakRecord',1);\r\n\r\n            this.isHammer = true;\r\n            cc.sys.localStorage.setItem('isHammer',1);\r\n            var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n            tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame1;\r\n            //this.useHammerRemind.getChildByName(\"remind\").getChildByName(\"useHammerBtn\").getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame3;\r\n            //this.isReviveHammer = false;\r\n            cc.sys.localStorage.setItem('isReviewHammer',0);\r\n\r\n            this.canRelive = true;\r\n            cc.sys.localStorage.setItem('canRelive',1);\r\n\r\n            this.isGameOver = false;\r\n            cc.sys.localStorage.setItem('isGameOver',0);\r\n            for(var i = 0; i < self.ROW; i++){\r\n                self.chunkList[i] = new Array(); // ...\r\n                if(i == self.ROW){\r\n                    for(var j = 0; j < self.COL; j++){\r\n                        self.chunkList[i][j] = self.linklinerandomChunk();\r\n\r\n                        //self.chunkList[i][j].getComponent(\"chunk\").row = i;\r\n                        //self.chunkList[i][j].getComponent(\"chunk\").col = j;\r\n\r\n                        var x = (2*self.chunkRadius + self.chunkGapX)*j + self.chunkGapX + self.chunkRadius;\r\n                        var y = (2*self.chunkRadius + self.chunkGapY)*i + self.chunkGapY + self.chunkRadius;\r\n                        self.boardNode.addChild(self.chunkList[i][j]);\r\n                        self.chunkList[i][j].setPosition(x, y);\r\n                        self.chunkList[i][j].opacity = 0;\r\n                        //console.log(\"[\" + i + \",\" + j + \"] : \" + \"(\" + self.chunkList[i][j].getPosition().x + \",\" + self.chunkList[i][j].getPosition().y + \")\");\r\n                    }   \r\n                }\r\n                else{\r\n                    for(var j = 0; j < self.COL; j++){\r\n                        self.chunkList[i][j] = self.linklinerandomChunk();\r\n\r\n                        //self.chunkList[i][j].getComponent(\"chunk\").row = i;\r\n                        //self.chunkList[i][j].getComponent(\"chunk\").col = j;\r\n\r\n                        var x = (2*self.chunkRadius + self.chunkGapX)*j + self.chunkGapX + self.chunkRadius;\r\n                        var y = (2*self.chunkRadius + self.chunkGapY)*i + self.chunkGapY + self.chunkRadius;\r\n                        self.boardNode.addChild(self.chunkList[i][j]);\r\n                        self.chunkList[i][j].setPosition(x, y);\r\n\r\n                        self.chunkList[i][j].setScale(0);\r\n                        // self.chunkList[i][j].runAction(cc.sequence(cc.delayTime(2),cc.scaleTo(0.5,1).easing(cc.easeBackOut())));\r\n                        //console.log(\"[\" + i + \",\" + j + \"] : \" + \"(\" + self.chunkList[i][j].getPosition().x + \",\" + self.chunkList[i][j].getPosition().y + \")\");\r\n                    }   \r\n                }\r\n            }\r\n            self.linklinesaveBoardData();\r\n        }\r\n        // 从本地读取 棋盘数据 恢复棋盘\r\n        else{\r\n            var LocalData = self.linklineloadBoardData();\r\n            for(var i = 0; i < self.ROW; i++){\r\n                self.chunkList[i] = new Array(); // ...\r\n                for(var j = 0; j < self.COL; j++){\r\n                    self.chunkList[i][j] = self.linklinerandomChunk();\r\n\r\n                    //self.chunkList[i][j].getComponent(\"chunk\").row = i;\r\n                    //self.chunkList[i][j].getComponent(\"chunk\").col = j;\r\n\r\n                    var x = (2*self.chunkRadius + self.chunkGapX)*j + self.chunkGapX + self.chunkRadius;\r\n                    var y = (2*self.chunkRadius + self.chunkGapY)*i + self.chunkGapY + self.chunkRadius;\r\n                    self.boardNode.addChild(self.chunkList[i][j]);\r\n                    self.chunkList[i][j].setPosition(x, y);\r\n                    var row_col = \"RC\" + i + j;\r\n                    var data = LocalData[row_col];\r\n                    self.chunkList[i][j].getComponent(\"linklinechunk\").linklinesetColor_Digit(dataMgr.colorMgr.linklinegetColorById(data.chunkDigit), data.chunkDigit);\r\n                    //console.log(self.chunkList[i][j].getComponent(\"chunk\").linklinegetChunkDigit())\r\n                    if(self.chunkList[i][j].getComponent('linklinechunk').linklinegetChunkDigit() >= 1024 && self.chunkList[i][j].getComponent('linklinechunk').linklinegetChunkDigit() < 1000000){\r\n                        self.chunkList[i][j].getChildByName('kuang').active = true;\r\n                        self.chunkList[i][j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                        self.chunkList[i][j].getChildByName('kuang').color = self.chunkList[i][j].children[0].color;\r\n                    }\r\n                    else if(self.chunkList[i][j].getComponent('linklinechunk').linklinegetChunkDigit() >= 1000000){\r\n                        self.chunkList[i][j].getChildByName('kuang').active = true;\r\n                        self.chunkList[i][j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                        self.chunkList[i][j].getChildByName('kuang').color = self.chunkList[i][j].children[0].color;\r\n                    }\r\n                    else{\r\n                        self.chunkList[i][j].getChildByName('kuang').active = false;\r\n                    } \r\n                    self.chunkList[i][j].setScale(0);\r\n                    // self.chunkList[i][j].runAction(cc.sequence(cc.delayTime(2),cc.scaleTo(0.5,1).easing(cc.easeBackOut())));\r\n                    //console.log(\"[\" + i + \",\" + j + \"] : \" + \"(\" + self.chunkList[i][j].getPosition().x + \",\" + self.chunkList[i][j].getPosition().y + \")\");\r\n                }    \r\n            }\r\n        }\r\n\r\n    },\r\n    // 随机生成 2，4，8的块\r\n    linklinerandomChunk:function(){\r\n        var self = this;\r\n        var chunk = cc.instantiate(self.chunkPre);\r\n        var chunkJS = chunk.getComponent(\"linklinechunk\");\r\n        var index = 0;\r\n        var colorInd = new cc.Color(255, 255, 255);\r\n        switch(parseInt(Math.random()*3)){\r\n            case 0:\r\n                index = 2;\r\n                colorInd = dataMgr.colorMgr.linklinegetColorById(index);\r\n                break;\r\n            case 1:\r\n                index = 4;\r\n                colorInd = dataMgr.colorMgr.linklinegetColorById(index);\r\n                break;\r\n            default:\r\n                index = 8;\r\n                colorInd = dataMgr.colorMgr.linklinegetColorById(index);\r\n                break;\r\n        }\r\n        chunkJS.linklinesetColor_Digit(colorInd, index);\r\n\r\n        return chunk;\r\n    },\r\n\r\n    // 添加事件\r\n    linklineaddTouchEvent:function(){\r\n        var self = this;\r\n        var board = self.boardNode;\r\n        board.on(cc.Node.EventType.TOUCH_START, function(event){\r\n            var touchStartPos = board.convertToNodeSpaceAR(event.getLocation()); // 世界坐标转换成相对boardNode的坐标\r\n            self.touchPos = touchStartPos\r\n            for(var i = 0; i < self.ROW; i++){\r\n                for(var j = 0; j < self.COL; j++){\r\n                    self.linklinegraphicsLine(self.chunkList[i][j], touchStartPos);\r\n                }\r\n            } \r\n        }, board);\r\n        board.on(cc.Node.EventType.TOUCH_MOVE, function(event){\r\n            var touchMovePos = board.convertToNodeSpaceAR(event.getLocation());\r\n            self.timeCount = 0;\r\n            self.touchPos = touchMovePos;\r\n\r\n            for(var i = 0; i < self.ROW; i++){\r\n                for(var j = 0; j < self.COL; j++){\r\n                    if(self.linklinechunk_fingerCollier(self.chunkList[i][j], touchMovePos)){\r\n                        self.linklinegraphicsLine(self.chunkList[i][j], touchMovePos);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            \r\n        }, board);\r\n        board.on(cc.Node.EventType.TOUCH_END, function(event){\r\n            if(self.chunkTempList.length >= 2){\r\n                self.linklinetogetherChunk(self.chunkTempList);\r\n                self.linklinedropChunkAct();\r\n            }\r\n            self.progressMgrJs.linklinesetProgressBar(0);\r\n            self.levelAni.active = false;\r\n            console.log(\"TOUCH_END\");\r\n            let n = self.chunkTempList.length;\r\n            self.chunkTempList.length = 0; // 清空数组\r\n            self.graphics.clear(); // 擦除连线\r\n            self.operateScore.stopAllActions();\r\n            self.operateScore.runAction(cc.sequence(\r\n                cc.scaleTo(0.2,0).easing(cc.easeBackIn()),\r\n                cc.callFunc(function(){\r\n                    self.operateScore.active = false;\r\n                })\r\n            )); // 隐藏当前操作得分\r\n            if(n >= 2){\r\n                let node = new cc.Node();\r\n                cc.find('Canvas/game/top').addChild(node);\r\n                node.setPosition(cc.v2(0,-154));\r\n                let label = node.addComponent(cc.Label);\r\n                if(self.doubleOnce){\r\n                    label.string = ',' + 4 * Number(self.operateScore.getChildByName('score').getComponent(cc.Label).string);\r\n                    self.doubleOnce = false\r\n                    self.scoreNode.stopAllActions();\r\n                    let num = parseInt(Math.random()*4 +1)\r\n                    if(self.score4_times < 5){\r\n                        num = 4;\r\n                        self.score4_times += 1;\r\n                        cc.sys.localStorage.setItem('score4_times',self.score4_times);\r\n                    }\r\n                    self.scoreNode.getComponent(cc.Sprite).spriteFrame = self.scoreSprite[num];\r\n                    self.scoreNode.opacity = 255;\r\n                    self.scoreNode.color = self.operateScore.color;\r\n                    self.scoreNode.setScale(0);\r\n                    self.scoreNode.active = true;\r\n                    self.scoreNode.runAction(cc.sequence(\r\n                        cc.scaleTo(0.5,1).easing(cc.easeBackOut()),\r\n                        cc.fadeOut(1),\r\n                        cc.callFunc(function(){\r\n                            self.scoreNode.active = false;    \r\n                        },self)\r\n                    ))\r\n                }\r\n                else if(n >= 8){\r\n                    label.string = ',' + 2 * Number(self.operateScore.getChildByName('score').getComponent(cc.Label).string);\r\n                    self.scoreNode.stopAllActions();\r\n                    let num = parseInt(Math.random()*4)\r\n                    if(self.score2_times < 5){\r\n                        num = 0;\r\n                        self.score2_times += 1;\r\n                        cc.sys.localStorage.setItem('score2_times',self.score2_times);\r\n                    }\r\n                    self.scoreNode.getComponent(cc.Sprite).spriteFrame = self.scoreSprite[num];\r\n                    self.scoreNode.opacity = 255;\r\n                    self.scoreNode.color = self.operateScore.color;\r\n                    self.scoreNode.setScale(0);\r\n                    self.scoreNode.active = true;\r\n                    self.scoreNode.runAction(cc.sequence(\r\n                        cc.scaleTo(0.5,1).easing(cc.easeBackOut()),\r\n                        cc.fadeOut(1),\r\n                        cc.callFunc(function(){\r\n                            self.scoreNode.active = false;    \r\n                        },self)\r\n                    ))\r\n                }\r\n                else{\r\n                    label.string = ',' + Number(self.operateScore.getChildByName('score').getComponent(cc.Label).string);\r\n                }\r\n                label.font = self.operateScore.getChildByName('score').getComponent(cc.Label).font;\r\n                node.color = self.operateScore.color;\r\n                node.setScale(0);\r\n                node.runAction(cc.sequence(\r\n                    cc.delayTime(0.2),\r\n                    cc.scaleTo(0.4,1).easing(cc.easeBackOut()),\r\n                    cc.spawn(cc.moveBy(0.5,cc.v2(0,100)),cc.fadeOut(0.5)),\r\n                    cc.callFunc(function(){\r\n                        node.destroy();    \r\n                    })\r\n                ))\r\n            }\r\n        }, board);\r\n\r\n        board.on(cc.Node.EventType.TOUCH_CANCEL, function(event){\r\n            if(self.chunkTempList.length >= 2){\r\n                self.linklinetogetherChunk(self.chunkTempList);\r\n                self.linklinedropChunkAct();\r\n            }\r\n            let n = self.chunkTempList.length;\r\n            self.progressMgrJs.linklinesetProgressBar(0);\r\n            self.levelAni.active = false;\r\n            self.chunkTempList.length = 0; // 清空数组\r\n            self.graphics.clear(); // 擦除连线\r\n            self.operateScore.stopAllActions();\r\n            self.operateScore.runAction(cc.sequence(\r\n                cc.scaleTo(0.2,0).easing(cc.easeBackIn()),\r\n                cc.callFunc(function(){\r\n                    self.operateScore.active = false;\r\n                })\r\n            )); // 隐藏当前操作得分\r\n            if(n >= 2){\r\n                let node = new cc.Node();\r\n                cc.find('Canvas/game/top').addChild(node);\r\n                node.setPosition(cc.v2(0,-154));\r\n                let label = node.addComponent(cc.Label);\r\n                if(self.doubleOnce){\r\n                    label.string = ',' +4 * Number(self.operateScore.getChildByName('score').getComponent(cc.Label).string);\r\n                    self.doubleOnce = false\r\n                    self.scoreNode.stopAllActions();\r\n                    let num = parseInt(Math.random()*4 + 1)\r\n                    if(self.score4_times < 5){\r\n                        num = 4;\r\n                        self.score4_times += 1;\r\n                        cc.sys.localStorage.setItem('score4_times',self.score4_times);\r\n                    }\r\n                    self.scoreNode.getComponent(cc.Sprite).spriteFrame = self.scoreSprite[num];\r\n                    self.scoreNode.opacity = 255;\r\n                    self.scoreNode.color = self.operateScore.color;\r\n                    self.scoreNode.setScale(0);\r\n                    self.scoreNode.active = true;\r\n                    self.scoreNode.runAction(cc.sequence(\r\n                        cc.scaleTo(0.5,1).easing(cc.easeBackOut()),\r\n                        cc.fadeOut(1),\r\n                        cc.callFunc(function(){\r\n                            self.scoreNode.active = false;    \r\n                        },self)\r\n                    ))\r\n                }\r\n                else if(n >= 8){\r\n                    label.string = ',' + 2 * Number(self.operateScore.getChildByName('score').getComponent(cc.Label).string);\r\n                    self.scoreNode.stopAllActions();\r\n                    let num = parseInt(Math.random()*4)\r\n                    if(self.score2_times < 5){\r\n                        num = 0;\r\n                        self.score2_times += 1;\r\n                        cc.sys.localStorage.setItem('score2_times',self.score2_times);\r\n                    }\r\n                    self.scoreNode.getComponent(cc.Sprite).spriteFrame = self.scoreSprite[num];\r\n                    self.scoreNode.opacity = 255;\r\n                    self.scoreNode.color = self.operateScore.color;\r\n                    self.scoreNode.setScale(0);\r\n                    self.scoreNode.active = true;\r\n                    self.scoreNode.runAction(cc.sequence(\r\n                        cc.scaleTo(0.5,1).easing(cc.easeBackOut()),\r\n                        cc.fadeOut(1),\r\n                        cc.callFunc(function(){\r\n                            self.scoreNode.active = false;    \r\n                        },self)\r\n                    ))\r\n                }\r\n                else{\r\n                    label.string = ',' + Number(self.operateScore.getChildByName('score').getComponent(cc.Label).string);\r\n                }\r\n                label.font = self.operateScore.getChildByName('score').getComponent(cc.Label).font;\r\n                node.color = self.operateScore.color;\r\n                node.setScale(0);\r\n                node.runAction(cc.sequence(\r\n                    cc.delayTime(0.2),\r\n                    cc.scaleTo(0.4,1).easing(cc.easeBackOut()),\r\n                    cc.spawn(cc.moveBy(0.5,cc.v2(0,100)),cc.fadeOut(0.5)),\r\n                    cc.callFunc(function(){\r\n                        node.destroy();    \r\n                    })\r\n                ))\r\n            }\r\n        }, board);\r\n    },\r\n    \r\n    // 块与鼠标点是否碰撞 39为chunnk的半径\r\n    linklinechunk_fingerCollier:function(chunk, point){\r\n        if(cc.pDistance(chunk.getPosition(), point) < this.chunkRadius + 18){\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    // 块与块能否相连，根据距离和数值进行判断\r\n    linklinechunk_chunkCollier:function(chunk1, chunk2){\r\n        var chunk1JS = chunk1.getComponent(\"linklinechunk\");\r\n        var chunk2JS = chunk2.getComponent(\"linklinechunk\");\r\n        if(cc.pDistance(chunk1.getPosition(), chunk2.getPosition()) < this.limitDis\r\n        && chunk1JS.linklinegetChunkDigit() == chunk2JS.linklinegetChunkDigit())\r\n            return true;\r\n        return false;\r\n    },\r\n    // 连线、连线条件判断\r\n\r\n    linklinegraphicsLine:function(chunk, point2){\r\n        var sum = 0;\r\n        if(this.linklinechunk_fingerCollier(chunk, point2)){\r\n            // 判断是否有起点\r\n            if(this.chunkTempList.length == 0){\r\n                this.chunkTempList.push(chunk);\r\n                this.startChunkID = chunk.uuid;\r\n                this.progressMgrJs.linklinesetProgressBarColor(chunk.children[0].color)\r\n                this.audioMgr.linklineplayAdvanced(this.chunkTempList.length);\r\n                \r\n\r\n                var chunAni = cc.instantiate(this.chunkAni);\r\n                chunAni.getChildByName(\"color\").color = chunk.getComponent(\"linklinechunk\").linklinegetChunkColor();\r\n                chunAni.setPosition(chunk.getPosition());\r\n                chunAni.zIndex = -1;\r\n                this.boardNode.addChild(chunAni);\r\n\r\n                chunAni.runAction(cc.sequence(\r\n                    cc.spawn(cc.scaleTo(0.5, 1.8), cc.fadeOut(0.5)),\r\n                    cc.callFunc(function(){\r\n                        chunAni.destroy();\r\n                    })\r\n                ));\r\n                let num = chunk.getComponent('linklinechunk').linklinegetChunkDigit();\r\n                for(let i = 1;i<22;i++){\r\n                    if(Math.pow(2,i) == num){\r\n                        this.closePl_num = i;\r\n                        break;\r\n                    }\r\n                }\r\n            }          \r\n            else{\r\n                //console.log(\"弹出1:\" + this.chunkTempList.length);\r\n                // 判断 压入 数组 还是弹出数组\r\n                var isInArray = false;\r\n                for(var k = 0; k < this.chunkTempList.length; k++){\r\n                    if(chunk.getPositionX() == this.chunkTempList[k].getPositionX()\r\n                    && chunk.getPositionY() == this.chunkTempList[k].getPositionY()){\r\n                        // 弹出\r\n                        if(this.startChunkID == chunk.uuid && !this.doubleOnce && this.chunkTempList.length > 3\r\n                            && this.linklinechunk_chunkCollier(this.chunkTempList[this.chunkTempList.length-1], this.chunkTempList[0])){\r\n                            this.chunkTempList.push(chunk);\r\n                            this.audioMgr.linklineplayConnect_close();\r\n                        \r\n                            vibrate1();\r\n\r\n                            var chunAni = cc.instantiate(this.chunkAni);\r\n                            chunAni.getChildByName(\"color\").color = chunk.getComponent(\"linklinechunk\").linklinegetChunkColor();\r\n                            chunAni.setPosition(chunk.getPosition());\r\n                            chunAni.zIndex = -1;\r\n                            this.boardNode.addChild(chunAni);\r\n                            chunAni.runAction(cc.sequence(\r\n                                cc.spawn(cc.scaleTo(0.5, 1.8), cc.fadeOut(0.5)),\r\n                                cc.callFunc(function(){\r\n                                    chunAni.destroy();\r\n                                })\r\n                            ));\r\n                            this.cancel_times = 0;\r\n                            this.doubleOnce = true;\r\n                            this.progressMgrJs.linklinesetProgressBar(30);\r\n                            if((1/this.levelUpTotal) * this.chunkTempList.length*2 + this.percentBar >= 1){\r\n                                this.levelAni.color = this.levelUp.getChildByName(\"circleRight\").color\r\n                                this.levelAni.active = true;\r\n                            }\r\n                            isInArray = true;\r\n                            break;\r\n                        }\r\n                        else{\r\n                            if(this.doubleOnce && chunk.uuid == this.startChunkID)  break\r\n                            if(chunk.uuid == this.chunkTempList[this.chunkTempList.length - 1].uuid){\r\n                                isInArray = true;\r\n                                break;\r\n                            }   \r\n                            this.cancel_times++;\r\n                            this.chunkTempList.splice(k+1, this.chunkTempList.length-k-1);\r\n                            this.audioMgr.linklineplayAdvanced(this.chunkTempList.length);\r\n                            this.progressMgrJs.linklinesetProgressBar(this.chunkTempList.length);\r\n                            let num = this.chunkTempList.length\r\n                            if(num >= 8){\r\n                                if((1/this.levelUpTotal) * num * 2 + this.percentBar >= 1){\r\n                                    this.levelAni.color = this.levelUp.getChildByName(\"circleRight\").color\r\n                                    this.levelAni.active = true;\r\n                                }\r\n                                else\r\n                                    this.levelAni.active = false;\r\n                            }\r\n                            else{\r\n                                if((1/this.levelUpTotal) * num + this.percentBar >= 1 && num != 1){\r\n                                    this.levelAni.color = this.levelUp.getChildByName(\"circleRight\").color\r\n                                    this.levelAni.active = true;\r\n                                }\r\n                                else\r\n                                    this.levelAni.active = false;\r\n                            }\r\n                            this.doubleOnce = false;\r\n                            isInArray = true;\r\n                            break;\r\n                      }\r\n                   }\r\n                }\r\n                if(!isInArray && this.linklinechunk_chunkCollier(chunk, this.chunkTempList[this.chunkTempList.length - 1]) && !this.doubleOnce){\r\n                    this.chunkTempList.push(chunk);\r\n                    this.audioMgr.linklineplayAdvanced(this.chunkTempList.length);\r\n                    var chunAni = cc.instantiate(this.chunkAni);\r\n                    chunAni.getChildByName(\"color\").color = chunk.getComponent(\"linklinechunk\").linklinegetChunkColor();\r\n                    chunAni.setPosition(chunk.getPosition());\r\n                    chunAni.zIndex = -1;\r\n                    this.boardNode.addChild(chunAni);\r\n                    chunAni.runAction(cc.sequence(\r\n                        cc.spawn(cc.scaleTo(0.5, 1.8), cc.fadeOut(0.5)),\r\n                        cc.callFunc(function(){\r\n                            chunAni.destroy();\r\n                        })\r\n                    ));\r\n                    this.cancel_times = 0;\r\n                    this.progressMgrJs.linklinesetProgressBar(this.chunkTempList.length);\r\n                    let num = this.chunkTempList.length;\r\n                    if(num >= 8){\r\n                        if((1/this.levelUpTotal) * num * 2 + this.percentBar >= 1){\r\n                            this.levelAni.color = this.levelUp.getChildByName(\"circleRight\").color\r\n                            this.levelAni.active = true;\r\n                        }\r\n                    }\r\n                    else{\r\n                        if((1/this.levelUpTotal) * num + this.percentBar >= 1){\r\n                            this.levelAni.color = this.levelUp.getChildByName(\"circleRight\").color\r\n                            this.levelAni.active = true;\r\n                        }\r\n                    }\r\n                }                  \r\n            }    \r\n        }\r\n        //else{\r\n            // if(this.chunkTempList.length >= 1){\r\n            //     this.graphics.clear();\r\n            //     this.graphics.moveTo(this.chunkTempList[0].getPositionX(), this.chunkTempList[0].getPositionY());\r\n            //     sum += this.chunkTempList[0].getComponent(\"linklinechunk\").linklinegetChunkDigit();\r\n            //     for(var i = 1; i < this.chunkTempList.length; i++){\r\n            //         this.graphics.lineTo(this.chunkTempList[i].getPositionX(), this.chunkTempList[i].getPositionY());\r\n            //         sum += this.chunkTempList[i].getComponent(\"linklinechunk\").linklinegetChunkDigit();\r\n            //     }\r\n            //     // 最后那个点\r\n            //     this.graphics.lineTo(point2.x, point2.y);\r\n            //     var chunkTempJS = this.chunkTempList[this.chunkTempList.length - 1].getComponent(\"linklinechunk\");\r\n            //     this.graphics.strokeColor = chunkTempJS.linklinegetChunkColor();\r\n            //     this.graphics.stroke();\r\n            // }\r\n        //}\r\n        for(var i = 0; i < this.chunkTempList.length; i++){\r\n            //this.graphics.lineTo(this.chunkTempList[i].getPositionX(), this.chunkTempList[i].getPositionY());\r\n            sum += this.chunkTempList[i].getComponent(\"linklinechunk\").linklinegetChunkDigit();\r\n        }\r\n        if(sum >= 2){\r\n            if(this.operateScore.active == false){\r\n                this.operateScore.setScale(0);\r\n                this.operateScore.active = true;\r\n                this.operateScore.runAction(cc.sequence(\r\n                    cc.scaleTo(0.2,1.2),\r\n                    cc.scaleTo(0.2,1).easing(cc.easeBackOut())\r\n                ))\r\n            }\r\n            this.operateScore.color = dataMgr.colorMgr.linklinegetColorById(this.linklinelineChunkSum(sum));\r\n\r\n            if(this.linklinelineChunkSum(sum) <= 512){\r\n                this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = this.linklinelineChunkSum(sum).toString();\r\n            }\r\n            else if(this.linklinelineChunkSum(sum) > 512 && this.linklinelineChunkSum(sum) <= 32768){\r\n                this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = Math.floor(this.linklinelineChunkSum(sum)/1000) + \".\"; // K\r\n            }\r\n            else if(this.linklinelineChunkSum(sum) == 65536){\r\n                this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = 64 + \".\";\r\n            }\r\n            else if(this.linklinelineChunkSum(sum) == 131072){\r\n                this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = 128 + \".\";\r\n            }\r\n            else if(this.linklinelineChunkSum(sum) == 262144){\r\n                this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = 256 + \".\";\r\n            }\r\n            else if(this.linklinelineChunkSum(sum) == 524288){\r\n                this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = 512 + \".\";\r\n            }\r\n            else if(this.linklinelineChunkSum(sum) >= 1048576){\r\n                this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = Math.floor(this.linklinelineChunkSum(sum)/1000000) + \"/\"; // M\r\n            }\r\n\r\n            //this.operateScore.getChildByName(\"score\").getComponent(cc.Label).string = (this.linklinelineChunkSum(sum)).toString();\r\n        }\r\n    },\r\n    update(dt){\r\n        if(this.chunkTempList.length >= 1){\r\n            this.graphics.clear();\r\n            this.graphics.moveTo(this.chunkTempList[0].getPositionX(), this.chunkTempList[0].getPositionY());\r\n            //sum += this.chunkTempList[0].getComponent(\"linklinechunk\").linklinegetChunkDigit();\r\n            for(var i = 1; i < this.chunkTempList.length; i++){\r\n                this.graphics.lineTo(this.chunkTempList[i].getPositionX(), this.chunkTempList[i].getPositionY());\r\n                //sum += this.chunkTempList[i].getComponent(\"linklinechunk\").linklinegetChunkDigit();\r\n            }\r\n            // 最后那个点\r\n            this.graphics.lineTo(this.touchPos.x, this.touchPos.y);\r\n            var chunkTempJS = this.chunkTempList[this.chunkTempList.length - 1].getComponent(\"linklinechunk\");\r\n            this.graphics.strokeColor = chunkTempJS.linklinegetChunkColor();\r\n            this.graphics.stroke();\r\n        }\r\n    },\r\n\r\n\r\n    linklineuploadTime_score:function(){\r\n        if(this.presentScore >= this.bestScore){\r\n            myGameCenterMgr.gameCenter(RANK.SCORE, this.presentScore);\r\n            console.log(\"分数: \" + this.presentScore);\r\n        }\r\n        cc.sys.localStorage.setItem(\"totalTime\", dataMgr.myLocalMgr.totalTime);\r\n        myGameCenterMgr.gameCenter(RANK.GAME_TIME, parseInt(dataMgr.myLocalMgr.totalTime));\r\n        console.log(\"时间: \" + parseInt(dataMgr.myLocalMgr.totalTime));\r\n        let str = '';\r\n        let num = Number(cc.sys.localStorage.getItem('hightestScore'));\r\n\r\n        //myGameCenterMgr.gameCenter(RANK.MAX_K, num);\r\n    },\r\n\r\n    // 将chunkTempList中的chunk进行处理\r\n    linklinetogetherChunk:function(lineChunkList){\r\n        this.progress_num = this.chunkTempList.length;\r\n        if(this.progress_num >= 8 || this.doubleOnce){\r\n            this.progress_num *= 2;\r\n        }\r\n        this.audioMgr.linklineplayConnect_up();\r\n        var chunkDigitSum = 0;\r\n        if(!this.doubleOnce){\r\n            var lastChunk = lineChunkList[lineChunkList.length - 1];\r\n            var lastChunkJS = lastChunk.getComponent(\"linklinechunk\");\r\n            for(var i = 0; i < lineChunkList.length; i++){\r\n                var chunkJS = lineChunkList[i].getComponent(\"linklinechunk\");\r\n                // 将最后一个之前的chunk 克隆 并 设置隐藏\r\n                if(i < lineChunkList.length - 1){\r\n                    // 克隆\r\n                    var cloneChunk = cc.instantiate(this.chunkPre);\r\n                    var cloneChunkJS = cloneChunk.getComponent(\"linklinechunk\");\r\n                    cloneChunkJS.linklinesetColor_Digit(chunkJS.linklinegetChunkColor(), chunkJS.linklinegetChunkDigit());\r\n                    if(cloneChunkJS.linklinegetChunkDigit() >= 1024 && cloneChunkJS.linklinegetChunkDigit() < 1000000){\r\n                        cloneChunk.getChildByName('kuang').active = true;\r\n                        cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                        cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                    }\r\n                    else if(cloneChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                        cloneChunk.getChildByName('kuang').active = true;\r\n                        cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                        cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                    }\r\n                    else{\r\n                        cloneChunk.getChildByName('kuang').active = false;\r\n                    }\r\n                    cloneChunk.setPosition(lineChunkList[i].getPosition());\r\n                    this.boardNode.addChild(cloneChunk);\r\n                    cloneChunk.zIndex = -1;\r\n                    // 隐藏\r\n                    \r\n                    lineChunkList[i].active = false;\r\n\r\n                    var moveTime = cc.pDistance(cloneChunk.getPosition(), lastChunk.getPosition()) / 800;\r\n                    // 移动完成后删除那个clone节点\r\n                    cloneChunk.runAction(cc.sequence(\r\n                        cc.delayTime(0.02*i),\r\n                        cc.spawn(cc.moveTo(moveTime, lastChunk.getPosition()), cc.scaleTo(moveTime, 0.3), cc.fadeOut(moveTime)),\r\n                        cc.callFunc(function(){\r\n                            cloneChunk.destroy();\r\n                        })),\r\n                    );  \r\n                    \r\n                    //lineChunkList[i].active = false;\r\n                }\r\n                // 计算和           \r\n                chunkDigitSum += chunkJS.linklinegetChunkDigit();\r\n            }\r\n\r\n            lastChunkJS.linklinesetColor_Digit(dataMgr.colorMgr.linklinegetColorById(this.linklinelineChunkSum(chunkDigitSum)), this.linklinelineChunkSum(chunkDigitSum));\r\n\r\n            if(lastChunkJS.linklinegetChunkDigit() >= 1024 && lastChunkJS.linklinegetChunkDigit() < 1000000){\r\n                lastChunk.getChildByName('kuang').active = true;\r\n                lastChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                lastChunk.getChildByName('kuang').color = lastChunk.children[0].color;\r\n            }\r\n            else if(lastChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                lastChunk.getChildByName('kuang').active = true;\r\n                lastChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                lastChunk.getChildByName('kuang').color = lastChunk.children[0].color;\r\n            }\r\n            else{\r\n                lastChunk.getChildByName('kuang').active = false;\r\n            }\r\n\r\n            if(this.linklinelineChunkSum(chunkDigitSum) > 1000){\r\n                lastChunk.children[2].active = true;\r\n                lastChunk.children[2].getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(cc.url.raw('resources/linklineGameSources/linklineballK'));\r\n            }\r\n            else if(this.linklinelineChunkSum(chunkDigitSum) > 1000000){\r\n                lastChunk.children[2].active = true;\r\n                lastChunk.children[2].getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(cc.url.raw('resources/linklineGameSources/linklineballM'));\r\n            }\r\n            else{\r\n                lastChunk.children[2].active = false;\r\n            }\r\n            this.linklinediscount(lastChunk);\r\n            let num = 0; \r\n            for(let i = this.iBk-1 ; i >= 0; i--){\r\n                if(!this.chunkList[i][this.jBk].active)\r\n                    num++;\r\n            }\r\n            if(num == 0)\r\n                lastChunk.runAction(cc.sequence(cc.scaleTo(0.2, 1.2), cc.scaleTo(0.2, 1.0)));\r\n            else{\r\n                this.dropChunkID = lastChunk.uuid;\r\n            }\r\n\r\n            var chunAni = cc.instantiate(this.chunkAni);\r\n            chunAni.getChildByName(\"color\").color = lastChunkJS.linklinegetChunkColor();\r\n            chunAni.setPosition(lastChunk.getPosition());\r\n            chunAni.zIndex = -1;\r\n            this.boardNode.addChild(chunAni);\r\n            chunAni.runAction(cc.sequence(\r\n                cc.spawn(cc.scaleTo(0.5, 1.8), cc.fadeOut(0.5),cc.moveBy(0.1,cc.v2(0,-num*(2*this.chunkRadius + this.chunkGapY)))),\r\n                cc.callFunc(function(){\r\n                    chunAni.destroy();\r\n                })\r\n            ));\r\n\r\n            if(this.progress_num >= 8)\r\n                this.linklineplAct();\r\n        }\r\n        else{\r\n            var curChunk = lineChunkList[0];\r\n            chunkDigitSum = 2;\r\n            var curChunkJS = curChunk.getComponent(\"linklinechunk\");\r\n            let pos = this.node.convertToNodeSpaceAR(curChunk.getPosition());\r\n            pos.x += 51.5;\r\n            pos.y += 133;\r\n            //console.log('当前坐标' + pos);\r\n            this.linklineplAct()\r\n            for(var i = 1; i < lineChunkList.length-1; i++){\r\n                var chunkJS = lineChunkList[i].getComponent(\"linklinechunk\");\r\n                // 将最后一个之前的chunk 克隆 并 设置隐藏\r\n                if(i < lineChunkList.length - 1){\r\n                    //克隆\r\n                    var cloneChunk = cc.instantiate(this.chunkPre);\r\n                    var cloneChunkJS = cloneChunk.getComponent(\"linklinechunk\");\r\n                    cloneChunkJS.linklinesetColor_Digit(chunkJS.linklinegetChunkColor(), chunkJS.linklinegetChunkDigit());\r\n\r\n                    if(cloneChunkJS.linklinegetChunkDigit() >= 1024 && cloneChunkJS.linklinegetChunkDigit() < 1000000){\r\n                        cloneChunk.getChildByName('kuang').active = true;\r\n                        cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                        cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                    }\r\n                    else if(cloneChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                        cloneChunk.getChildByName('kuang').active = true;\r\n                        cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                        cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                    }\r\n                    else{\r\n                        cloneChunk.getChildByName('kuang').active = false;\r\n                    }\r\n\r\n                    cloneChunk.setPosition(lineChunkList[i].getPosition());\r\n                    this.boardNode.addChild(cloneChunk);\r\n                    cloneChunk.zIndex = -1;\r\n                    // 隐藏\r\n                    lineChunkList[i].active = false;\r\n\r\n                    var moveTime = cc.pDistance(cloneChunk.getPosition(), curChunk.getPosition()) / 800;\r\n                    //移动完成后删除那个clone节点\r\n                    cloneChunk.runAction(cc.sequence(\r\n                        cc.delayTime(0.02*i),\r\n                        cc.spawn(cc.moveTo(moveTime, curChunk.getPosition()), cc.scaleTo(moveTime, 0.3), cc.fadeOut(moveTime)),\r\n                        cc.callFunc(function(){\r\n                            cloneChunk.destroy();\r\n                        })),\r\n                    );  \r\n                    \r\n                    //lineChunkList[i].active = false;\r\n                }\r\n                // 计算和           \r\n                chunkDigitSum += chunkJS.linklinegetChunkDigit();\r\n            }\r\n            chunkDigitSum += 2 * chunkJS.linklinegetChunkDigit();\r\n            curChunkJS.linklinesetColor_Digit(dataMgr.colorMgr.linklinegetColorById(this.linklinelineChunkSum(chunkDigitSum)), this.linklinelineChunkSum(chunkDigitSum));\r\n\r\n            if(curChunkJS.linklinegetChunkDigit() >= 1024 && curChunkJS.linklinegetChunkDigit() < 1000000){\r\n                curChunk.getChildByName('kuang').active = true;\r\n                curChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                curChunk.getChildByName('kuang').color = curChunk.children[0].color;\r\n            }\r\n            else if(curChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                curChunk.getChildByName('kuang').active = true;\r\n                curChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                curChunk.getChildByName('kuang').color = curChunk.children[0].color;\r\n            }\r\n            else{\r\n                curChunk.getChildByName('kuang').active = false;\r\n            }\r\n\r\n            this.linklinediscount(curChunk);\r\n            let num = 0; \r\n            for(let i = this.iBk-1 ; i >= 0; i--){\r\n                if(!this.chunkList[i][this.jBk].active)\r\n                    num++;\r\n            }\r\n            if(num == 0){\r\n                curChunk.runAction(cc.sequence(cc.scaleTo(0.2, 1.2), cc.scaleTo(0.2, 1.0)));\r\n            }\r\n            else{\r\n                this.dropChunkID == curChunk.uuid;\r\n            }\r\n\r\n\r\n            var chunAni = cc.instantiate(this.chunkAni);\r\n            chunAni.getChildByName(\"color\").color = curChunkJS.linklinegetChunkColor();\r\n            chunAni.setPosition(curChunk.getPosition());\r\n            chunAni.zIndex = -1;\r\n            this.boardNode.addChild(chunAni);\r\n            chunAni.runAction(cc.sequence(\r\n                cc.spawn(cc.scaleTo(0.5, 1.8), cc.fadeOut(0.5),cc.moveBy(0.1,cc.v2(0,-num*(2*this.chunkRadius + this.chunkGapY)))),\r\n                cc.callFunc(function(){\r\n                    chunAni.destroy();\r\n                })\r\n            ));\r\n        }\r\n        var correctSum = this.linklinelineChunkSum(chunkDigitSum);\r\n        \r\n        cc.log('得分' + correctSum)\r\n        if(correctSum == 1024){\r\n            num_1k += 1;\r\n            cc.sys.localStorage.setItem('num_1k',num_1k);\r\n        }\r\n        if(correctSum > this.hightestScore){\r\n            this.audioMgr.linklineplayHigh_single_score();\r\n            cc.sys.localStorage.setItem(\"hightestScore\", correctSum);\r\n            this.hightestScore = correctSum;\r\n            //console.log('新nk')\r\n            if(correctSum == 512){\r\n                if(!isFiveStar){\r\n                    this.fiveStarNode.active = true;\r\n                    this.linklinemySlideIn(this.fiveStarNode.getChildByName(\"fiveStar\"));\r\n                }\r\n                else{\r\n                    myGameCenterMgr.fiveStar();\r\n                }\r\n            }\r\n            if(correctSum >= 1024){\r\n                //console.log('nk对话框')\r\n                this.audioMgr.linklineplayDialog();\r\n                let node = this.node.getChildByName('dialouge')\r\n                node.getChildByName('block').active = true;\r\n                node.getChildByName('block').runAction(cc.fadeIn(0.3));\r\n                if(correctSum >= 1024 && correctSum <= 32768){\r\n                    node.getChildByName('dialouge1').getChildByName('label').getComponent(cc.Label).string = Math.floor(correctSum/1000) + \".\"; // K\r\n                }\r\n                else if(correctSum == 65536){\r\n                    node.getChildByName('dialouge1').getChildByName('label').getComponent(cc.Label).string = 64 + \".\";\r\n                }\r\n                else if(correctSum == 131072){\r\n                    node.getChildByName('dialouge1').getChildByName('label').getComponent(cc.Label).string = 128 + \".\";\r\n                }\r\n                else if(correctSum == 262144){\r\n                    node.getChildByName('dialouge1').getChildByName('label').getComponent(cc.Label).string = 256 + \".\";\r\n                }\r\n                else if(correctSum == 524288){\r\n                    node.getChildByName('dialouge1').getChildByName('label').getComponent(cc.Label).string = 512 + \".\";\r\n                }\r\n                else if(correctSum >= 1048576){\r\n                    node.getChildByName('dialouge1').getChildByName('label').getComponent(cc.Label).string = Math.floor(correctSum/1000000) + \"/\"; // M\r\n                }\r\n                this.dialouge_Time = Number(new Date());\r\n                node.getChildByName('dialouge1').setScale(0);\r\n                node.getChildByName('dialouge1').active = true;\r\n                node.getChildByName('dialouge1').runAction(cc.scaleTo(0.3,1).easing(cc.easeBackOut()));\r\n            }\r\n        }\r\n        cc.find('Canvas/game/top/levelUp/circleLeft').runAction(cc.sequence(\r\n            cc.scaleTo(0.2,1.2),\r\n            cc.scaleTo(0.2,1)\r\n        ))\r\n        this.levelUp.getChildByName(\"progressBar\").runAction(cc.sequence(\r\n            cc.scaleTo(0.2,1,0.6),\r\n            cc.scaleTo(0.2,1,1)\r\n        ))\r\n        if(this.doubleOnce){\r\n            let num = this.progress_num;\r\n            if(num * (1/this.levelUpTotal) + this.levelUp.getChildByName(\"progressBar\").getComponent(cc.ProgressBar).progress >= 1){\r\n                num = (1 - this.levelUp.getChildByName(\"progressBar\").getComponent(cc.ProgressBar).progress) * this.levelUpTotal;\r\n            }\r\n            this.scheduleOnce(function(){\r\n                this.linklinebarAct(num);\r\n            },0.4)\r\n        }\r\n        // 得分 \r\n        this.linklineaddScores(correctSum);\r\n        \r\n        this.scheduleOnce(function(){\r\n            // 每次连完检测是否游戏结束\r\n            if(this.linklineisGameover()){\r\n                // 锤子是否可用\r\n                if(this.isHammer || this.doubleNum){\r\n                    this.audioMgr.linklineplayDialog()\r\n                    this.useHammerRemind.active = true;\r\n                    this.linklinemySlideIn(this.useHammerRemind.getChildByName(\"remind\"));\r\n                    \r\n                    if(this.isHammer && this.doubleNum){\r\n                        this.hammer_btn.active = true;\r\n                        this.hammer_btn.setPositionX(100);\r\n                        this.double_btn.active = true;\r\n                        this.double_btn.setPositionX(-100);\r\n                    }\r\n                    else if(this.isHammer){\r\n                        this.hammer_btn.active = true;\r\n                        this.hammer_btn.setPositionX(0);\r\n                        this.double_btn.active = false;\r\n                    }\r\n                    else{\r\n                        this.double_btn.active = true;\r\n                        this.double_btn.setPositionX(0);\r\n                        this.hammer_btn.active = false;\r\n                    }\r\n                    // this.useHammerRemind.getChildByName(\"remind\").getChildByName(\"useHammerBtn\").runAction(\r\n                    //     cc.repeatForever(cc.sequence(cc.scaleTo(0.4, 1.2), cc.scaleTo(0.4, 1.0)))\r\n                    // );\r\n                }\r\n                else{\r\n                    //  每次死亡上传 游戏时间 和 最高分\r\n                    console.log(\"gameover!!!\");\r\n                    this.gameoverTimes++;\r\n                    cc.sys.localStorage.setItem(\"gameoverTimes\", this.gameoverTimes);\r\n                    this.blockInputNode2.active = true;\r\n                    this.linklinegameoverAni();\r\n                    this.scheduleOnce(function(){\r\n                        this.blockInputNode2.active = false;\r\n                    }, 2.0);\r\n                    this.scheduleOnce(function(){\r\n                        \r\n                        // 满足条件 则 弹出复活界面\r\n                        if(this.canRelive){\r\n                            this.audioMgr.linklineplayRevive();\r\n                            this.node.getChildByName(\"relive\").active = true;\r\n                            this.linklinemySlideIn(this.node.getChildByName(\"relive\").getChildByName(\"reliveBtns\"));\r\n                            // 倒计时5s\r\n                            this.circleYellow.getComponent(cc.ProgressBar).progress = 1;\r\n                            this.schedule(this.linklinecountTime, 0.01);\r\n                            this.schedule(this.linklinecountTime2,1);\r\n                            this.canRelive = false;\r\n                        }\r\n                        else{\r\n                            // 死亡\r\n                            if(!noAD && this.gameoverTimes%AD_CONFIG.DIED_TIMES == 0){\r\n                                console.log(\"死亡广告!!!\");\r\n                                if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIED_PRO/100){\r\n                                    console.log(\"full screen AD!!!\");\r\n                                    myADMgr.showFullScreenAD();\r\n                                }\r\n                            }\r\n                            this.linklinegameEvaluate();\r\n                            this.node.getChildByName(\"gameover\").active = true;\r\n                            this.linklinemySlideIn(this.node.getChildByName(\"gameover\").getChildByName(\"gameoverBtns\"));\r\n                        }\r\n\r\n                    }, 2.0);\r\n                }\r\n            }\r\n            else{\r\n                // 等级进度条 加\r\n                // 保存棋盘数据\r\n                console.log(\"continue!\");\r\n                this.scheduleOnce(this.linklinesaveBoardData, 0.4);\r\n            }\r\n        }, 0.3);\r\n        this.scheduleOnce(function(){\r\n            this.schedule(this.linklineaddProgerssBar,0.025);\r\n        },0.4)\r\n        // 计时归0\r\n        this.timeCount = 0;\r\n    },\r\n\r\n\r\n    linklineuseHammer_giveUp:function(){\r\n        this.audioMgr.linklineplayUi_btn();\r\n        this.linklinemySlideOut(this.useHammerRemind.getChildByName(\"remind\"));\r\n        //  每次死亡上传 游戏时间 和 最高分\r\n        console.log(\"gameover!!!\");\r\n        this.gameoverTimes++;\r\n        cc.sys.localStorage.setItem(\"gameoverTimes\", this.gameoverTimes);\r\n        this.blockInputNode2.active = true;\r\n        this.linklinegameoverAni();\r\n        this.scheduleOnce(function(){\r\n            this.blockInputNode2.active = false;\r\n        }, 2.0);\r\n        this.scheduleOnce(function(){\r\n            \r\n            // 满足条件 则 弹出复活界面\r\n            if(this.canRelive){\r\n                this.audioMgr.linklineplayRevive();\r\n                this.node.getChildByName(\"relive\").active = true;\r\n                this.linklinemySlideIn(this.node.getChildByName(\"relive\").getChildByName(\"reliveBtns\"));\r\n                // 倒计时5s\r\n                this.circleYellow.getComponent(cc.ProgressBar).progress = 1;\r\n                this.schedule(this.linklinecountTime, 0.01);\r\n                this.schedule(this.linklinecountTime2,1);\r\n                this.canRelive = false;\r\n                cc.sys.localStorage.setItem('canRelive',0);\r\n            }\r\n            else{\r\n                // 死亡\r\n                if(!noAD && this.gameoverTimes%AD_CONFIG.DIED_TIMES == 0){\r\n                    console.log(\"死亡广告!!!\");\r\n                    if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIED_PRO/100){\r\n                        console.log(\"full screen AD!!!\");\r\n                        myADMgr.showFullScreenAD();\r\n                    }\r\n                }\r\n                this.linklinegameEvaluate();\r\n                this.node.getChildByName(\"gameover\").active = true;\r\n                this.linklinemySlideIn(this.node.getChildByName(\"gameover\").getChildByName(\"gameoverBtns\"));\r\n            }\r\n        }, 2.0);\r\n    },\r\n\r\n    linklinesupportUs:function(){\r\n        this.linklinemySlideOut(this.fiveStarNode.getChildByName(\"fiveStar\"));\r\n        if(this.linklineisNetWork()){\r\n            myGameCenterMgr.fiveStar();\r\n            isFiveStar = true;\r\n            cc.sys.localStorage.setItem(\"isFiveStar\", \"true\");\r\n        }\r\n    },\r\n\r\n    linklinecloseFiveStarNode:function(){\r\n        //this.fiveStarNode.active = false;\r\n        this.linklinemySlideOut(this.fiveStarNode.getChildByName(\"fiveStar\"));\r\n    },\r\n\r\n    // 死亡动效\r\n    linklinegameoverAni:function(){\r\n        for(var i = 0; i < this.ROW; i++){\r\n            for(var j = 0; j < this.COL; j++){\r\n                this.chunkList[i][j].runAction(cc.sequence(\r\n                    cc.delayTime(0.15*i + 0.15*j),\r\n                    cc.scaleTo(0.2, 1.3),\r\n                    cc.scaleTo(0.2, 1.0),\r\n                ));\r\n            }\r\n        }\r\n    },\r\n\r\n    // 倒计时\r\n    linklinecountTime:function(){\r\n        this.circleYellow.getComponent(cc.ProgressBar).progress -= 1/500;\r\n        if(this.circleYellow.getComponent(cc.ProgressBar).progress <= 0){\r\n            this.unschedule(this.linklinecountTime);\r\n            this.linklinemySlideOut(this.node.getChildByName(\"relive\").getChildByName(\"reliveBtns\"));\r\n\r\n            this.linklinegameEvaluate()\r\n            this.scheduleOnce(function(){\r\n                this.node.getChildByName(\"gameover\").active = true;\r\n                this.linklinemySlideIn(this.node.getChildByName(\"gameover\").getChildByName(\"gameoverBtns\"));\r\n            },0.6)\r\n        }\r\n    },\r\n    linklinecountTime2(){\r\n        let label = cc.find('Canvas/game/relive/reliveBtns/label').getComponent(cc.Label);\r\n        label.string = Number(label.string) - 1;\r\n        label.node.runAction(cc.sequence(cc.scaleTo(0.2,1.1),cc.scaleTo(0.2,1)));\r\n        if(Number(label.string) == 0){\r\n            this.unschedule(this.linklinecountTime2,1);\r\n        }\r\n    },\r\n    // 将连成线的chunk 进行运算 得到数值\r\n    linklinelineChunkSum:function(sum){\r\n        var count = 0;\r\n        while(sum >= 2){\r\n            sum /= 2;\r\n            count++;\r\n        }\r\n        return Math.pow(2, count);\r\n    },\r\n    // 设置当前分数 和 历史最高分\r\n    linklineaddScores:function(score){\r\n        if(this.doubleOnce)\r\n            score *= 4;\r\n        else if(this.chunkTempList.length >= 8){\r\n            score *= 2;\r\n        }\r\n        this.presentScore += score;\r\n        cc.sys.localStorage.setItem(\"presentScore\", this.presentScore);\r\n        if(this.bestScore <= this.presentScore){\r\n            if(!this.breakRecord && this.restartTimes != 0){\r\n                this.audioMgr.linklineplayBest_score();\r\n                cc.find('Canvas/game/top/pause_scores/presentScore').runAction(cc.sequence(\r\n                    cc.scaleTo(0.2,1.2),\r\n                    cc.scaleTo(0.2,0.8),\r\n                    cc.scaleTo(0.2,1.2),\r\n                    cc.scaleTo(0.1,1)\r\n                ));\r\n                //this.audioMgr.playDialog();\r\n                let node = this.node.getChildByName('dialouge')\r\n                node.getChildByName('block').active = true;\r\n                node.getChildByName('block').runAction(cc.fadeIn(0.3));\r\n                this.dialouge_Time = Number(new Date());\r\n                node.getChildByName('dialouge2').setScale(0);\r\n                node.getChildByName('dialouge2').active = true;\r\n                node.getChildByName('dialouge2').runAction(cc.scaleTo(0.3,1).easing(cc.easeBackOut()));\r\n            } \r\n            this.bestScore = this.presentScore;\r\n            // 存到本地磁盘\r\n            cc.sys.localStorage.setItem(\"bestScore\", this.bestScore);\r\n            this.breakRecord = true;\r\n            cc.sys.localStorage.setItem('breakRecord',1);\r\n        }\r\n        //console.log(\"presentScore: \" + this.presentScore);\r\n        //console.log(\"bestScore: \" + this.bestScore);\r\n\r\n        this.pause_scores.getChildByName(\"presentScore\").getChildByName(\"score\").getComponent(cc.Label).string = (this.presentScore).toString();\r\n        this.pause_scores.getChildByName(\"bestScore\").getChildByName(\"score\").getComponent(cc.Label).string = (this.bestScore).toString();\r\n\r\n    },\r\n    // 设置进度条颜色、进度 及 旁边两圆圈的颜色\r\n    linklineaddProgerssBar:function(){\r\n        this.percentBar += 1/this.levelUpTotal;\r\n        this.progress_times += 1;\r\n        if(this.progress_num == this.progress_times){\r\n            this.unschedule(this.linklineaddProgerssBar);\r\n            this.progress_times = 0;\r\n        }\r\n        cc.sys.localStorage.setItem(\"percentBar\", this.percentBar);\r\n        if(this.percentBar >= 1.0){\r\n            this.unschedule(this.linklineaddProgerssBar);\r\n            this.progress_times = 0;\r\n            this.levelUp_time = Number(new Date());\r\n            this.linklinelevelUpFun();\r\n        }\r\n        this.levelUp.getChildByName(\"progressBar\").getComponent(cc.ProgressBar).progress = this.percentBar;\r\n        //console.log(\"this.percentBar : \" + this.percentBar);\r\n    },\r\n    linklinelevelUpFun(){\r\n        this.audioMgr.linklineplayLevel_up();\r\n        this.percentBar = 0;\r\n        cc.sys.localStorage.setItem(\"percentBar\", this.percentBar);\r\n        this.circleNumLeft += 1;\r\n        if(this.circleNumLeft <6){\r\n            this.levelUpTotal = 30;\r\n            if(this.circleNumLeft == 1)\r\n                this.levelUpTotal = 30;\r\n            if(this.circleNumLeft == 2)\r\n                this.levelUpTotal = 40;\r\n            if(this.circleNumLeft == 3)\r\n                this.levelUpTotal = 50;\r\n            if(this.circleNumLeft == 4)\r\n                this.levelUpTotal = 60;\r\n            if(this.circleNumLeft == 5)\r\n                this.levelUpTotal = 70;\r\n        }\r\n        else{\r\n            this.levelUpTotal = 75 + 5 *(this.circleNumLeft-6);\r\n        }\r\n\r\n        this.levelUp.getChildByName(\"circleLeft\").getChildByName(\"curLevel\").getComponent(cc.Label).string = (this.circleNumLeft).toString();\r\n        this.levelUp.getChildByName(\"circleLeft\").color = dataMgr.colorMgr.linklinegetCircleColorByIndex(this.circleNumLeft % dataMgr.colorMgr.linklinegetCircleColorLength() + 1);\r\n        cc.sys.localStorage.setItem(\"circleNum1\", this.circleNumLeft);\r\n        this.circleNumRight += 1;\r\n\r\n        this.levelUp.getChildByName(\"circleRight\").getChildByName(\"nextLevel\").getComponent(cc.Label).string = (this.circleNumRight).toString();\r\n        this.levelUp.getChildByName(\"circleRight\").color = dataMgr.colorMgr.linklinegetCircleColorByIndex(this.circleNumRight % dataMgr.colorMgr.linklinegetCircleColorLength() + 1);\r\n        cc.sys.localStorage.setItem(\"circleNum2\", this.circleNumRight);\r\n\r\n        this.levelUp.getChildByName(\"progressBar\").getChildByName(\"bar\").color = dataMgr.colorMgr.linklinegetCircleColorByIndex(this.circleNumLeft % dataMgr.colorMgr.linklinegetCircleColorLength() + 1);\r\n\r\n        // 弹出升级提示框\r\n        this.node.getChildByName(\"levelUpMes\").getChildByName('block').runAction(cc.fadeIn(0.3));\r\n        this.node.getChildByName(\"levelUpMes\").active = true;\r\n        this.node.getChildByName(\"levelUpMes\").getChildByName('Ribbon').getComponent(cc.ParticleSystem).resetSystem();\r\n        this.node.getChildByName(\"levelUpMes\").getChildByName('levelUp').getComponent(sp.Skeleton).setAnimation(1,'start1',false);\r\n        this.node.getChildByName(\"levelUpMes\").getChildByName('levelUp').getComponent(sp.Skeleton).addAnimation(1,'wait2',true);\r\n        this.audioMgr.linklineplayDialog()\r\n        this.node.getChildByName(\"levelUpMes\").getChildByName('TapToContinue').stopAllActions();\r\n        this.scheduleOnce(function(){\r\n            this.node.getChildByName(\"levelUpMes\").getChildByName('TapToContinue').active = true;\r\n            this.node.getChildByName(\"levelUpMes\").getChildByName('TapToContinue').runAction(cc.repeatForever(cc.sequence(\r\n                cc.fadeOut(0.7),\r\n                cc.fadeIn(0.7)\r\n            )))\r\n        },2)\r\n        this.linklineuploadTime_score();\r\n    },\r\n\r\n    // 读取棋盘数据\r\n    linklineloadBoardData:function(){\r\n        return JSON.parse(cc.sys.localStorage.getItem(\"LocalBoardData\"));\r\n    },\r\n\r\n    // 保存棋盘数据到本地磁盘\r\n    linklinesaveBoardData:function(){\r\n        var obj = {};\r\n        for(var i = 0; i < this.ROW; i++){\r\n            for(var j = 0; j < this.COL; j++){\r\n                // 对象名  key\r\n                var row_col = \"RC\" + i + j;\r\n                // \r\n                var boardData = {\r\n                    chunkDigit: this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkDigit(),\r\n                };\r\n                obj[row_col] = boardData;\r\n            }\r\n        }\r\n        cc.sys.localStorage.setItem(\"LocalBoardData\", JSON.stringify(obj));\r\n        //console.log(cc.sys.localStorage.getItem(\"LocalBoardData\"));\r\n    },\r\n    \r\n    // 判断是否 gameover\r\n    linklineisGameover:function(){\r\n        for(var i = 0; i < this.ROW; i++){\r\n            for(var j = 0; j < this.COL; j++){\r\n                var currentChunkJS = this.chunkList[i][j].getComponent(\"linklinechunk\");\r\n                // 上边\r\n                if(i < this.ROW-1){\r\n                    var upChunkJS = this.chunkList[i+1][j].getComponent(\"linklinechunk\");\r\n                    if(currentChunkJS.linklinegetChunkDigit() == upChunkJS.linklinegetChunkDigit()){\r\n                        return false;\r\n                    }\r\n                }\r\n                // 右边\r\n                if(j < this.COL-1){\r\n                    var rightChunkJS = this.chunkList[i][j+1].getComponent(\"linklinechunk\");\r\n                    if(currentChunkJS.linklinegetChunkDigit() == rightChunkJS.linklinegetChunkDigit()){\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.isGameOver = true;\r\n        cc.sys.localStorage.setItem('isGameOver',1);\r\n        return true;\r\n    },\r\n\r\n    linklinegameEvaluate(){\r\n        let node = cc.find('Canvas/game/gameover/gameoverBtns');\r\n        node.getChildByName('score').getComponent(cc.Label).string = this.presentScore;\r\n        let label_rank = node.getChildByName('rank').getComponent(cc.Label);\r\n        if(this.presentScore >= 100000000){\r\n            label_rank.string = 100 +'-';\r\n        }\r\n        else if(this.presentScore >= 10000000){\r\n            let i = parseInt(this.presentScore/10000000)\r\n            i = i + 90;\r\n            label_rank.string = i + '-';\r\n        }\r\n        else if(this.presentScore >= 1000000){\r\n            let i = parseInt(this.presentScore/1000000)\r\n            i = i + 80;\r\n            label_rank.string = i + '-';\r\n        }\r\n        else if(this.presentScore >= 100000){\r\n            let i = parseInt(this.presentScore/100000)\r\n            i = i + 70;\r\n            label_rank.string = i + '-';\r\n        }\r\n        else if(this.presentScore >= 10000){\r\n            let i = parseInt(this.presentScore/10000)\r\n            i = i + 60;\r\n            label_rank.string = i + '-';\r\n        }\r\n        else if(this.presentScore >= 1000){\r\n            let i = parseInt((this.presentScore-1000)/300)\r\n            i = i + 30;\r\n            label_rank.string = i + '-';\r\n        }\r\n        else{\r\n            let i = parseInt((this.presentScore-100)/50)\r\n            i += 1;\r\n            if(i < 0)   i = 0;\r\n            label_rank.string = i + '-';\r\n        }\r\n        if(this.breakRecord && this.restartTimes != 0){\r\n            node.getChildByName('medal').active = true;\r\n            node.getChildByName('isNewBest').getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(cc.url.raw('resources/linklineGameOverSources/linklinenew_best.png'));\r\n            node.getChildByName('score').setPositionX(35);\r\n            let num = parseInt(Math.random()*3);\r\n            this.evaluate.getComponent(cc.Sprite).spriteFrame = this.evaluateSprite[num];\r\n        }\r\n        else{\r\n\r\n            node.getChildByName('medal').active = false;\r\n            node.getChildByName('isNewBest').getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(cc.url.raw('resources/linklineGameOverSources/linklinescore001.png'));\r\n            node.getChildByName('score').setPositionX(0);\r\n            let num = parseInt(Math.random()*3) + 3;\r\n            this.evaluate.getComponent(cc.Sprite).spriteFrame = this.evaluateSprite[num];\r\n        }\r\n        let sum = Number(cc.sys.localStorage.getItem('hightestScore'));\r\n        //node.getChildByName('bestNum').color = dataMgr.colorMgr.linklinegetColorById(this.linklinelineChunkSum(sum));\r\n        let label = node.getChildByName('num').getComponent(cc.Label);\r\n        if(this.linklinelineChunkSum(sum) <= 512){\r\n            label.string = this.linklinelineChunkSum(sum).toString();\r\n        }\r\n        else if(this.linklinelineChunkSum(sum) > 512 && this.linklinelineChunkSum(sum) <= 32768){\r\n            label.string = Math.floor(this.linklinelineChunkSum(sum)/1000) + \".\"; // K\r\n        }\r\n        else if(this.linklinelineChunkSum(sum) == 65536){\r\n            label.string = 64 + \".\";\r\n        }\r\n        else if(this.linklinelineChunkSum(sum) == 131072){\r\n            label.string = 128 + \".\";\r\n        }\r\n        else if(this.linklinelineChunkSum(sum) == 262144){\r\n            label.string = 256 + \".\";\r\n        }\r\n        else if(this.linklinelineChunkSum(sum) == 524288){\r\n            label.string = 512 + \".\";\r\n        }\r\n        else if(this.linklinelineChunkSum(sum) >= 1048576){\r\n            label.string = Math.floor(this.linklinelineChunkSum(sum)/1000000) + \"/\"; // M\r\n        }\r\n    },\r\n\r\n    // 提示 的 动效\r\n    linklinetipsChunkAction:function(chunk1, chunk2){\r\n        var callFunction = cc.callFunc(function(){\r\n            chunk2.runAction(cc.sequence(\r\n                cc.scaleTo(0.2, 1.2),\r\n                cc.scaleTo(0.2, 1.0).easing(cc.easeBackOut())\r\n            ));\r\n        });\r\n        chunk1.runAction(cc.sequence(\r\n            cc.scaleTo(0.2, 1.2),\r\n            cc.scaleTo(0.2, 1.0).easing(cc.easeBackOut()),\r\n            callFunction\r\n        ));\r\n    },\r\n    // 提示\r\n    linklinetips:function(){\r\n        var countNumber = 0;\r\n        while(countNumber <= 10000){\r\n            // 随机一个位置\r\n            countNumber++;\r\n            var row = Math.floor(Math.random()*this.ROW);\r\n            var col = Math.floor(Math.random()*this.COL);\r\n            var currentChunk = this.chunkList[row][col];\r\n            var currentChunkJS = currentChunk.getComponent(\"linklinechunk\");\r\n            // 上边\r\n            if(row < this.ROW-1){\r\n                var upChunk = this.chunkList[row+1][col]\r\n                var upChunkJS = upChunk.getComponent(\"linklinechunk\");\r\n                if(currentChunkJS.linklinegetChunkDigit() == upChunkJS.linklinegetChunkDigit()){\r\n                    this.linklinetipsChunkAction(currentChunk, upChunk);\r\n                    break;\r\n                }\r\n            }\r\n            // 下边\r\n            if(row > 0){\r\n                var downChunk = this.chunkList[row-1][col];\r\n                var downChunkJS = downChunk.getComponent(\"linklinechunk\");\r\n                if(currentChunkJS.linklinegetChunkDigit() == downChunkJS.linklinegetChunkDigit()){\r\n                    this.linklinetipsChunkAction(currentChunk, downChunk);\r\n                    break;\r\n                }\r\n            }\r\n            // 左边\r\n            if(col > 0){\r\n                var leftChunk = this.chunkList[row][col-1];\r\n                var leftChunkJS = leftChunk.getComponent(\"linklinechunk\");\r\n                if(currentChunkJS.linklinegetChunkDigit() == leftChunkJS.linklinegetChunkDigit()){\r\n                    this.linklinetipsChunkAction(currentChunk, leftChunk);\r\n                    break;\r\n                }\r\n            }\r\n            // 右边\r\n            if(col < this.COL-1){\r\n                var rightChunk = this.chunkList[row][col+1];\r\n                var rightChunkJS = rightChunk.getComponent(\"linklinechunk\");\r\n                if(currentChunkJS.linklinegetChunkDigit() == rightChunkJS.linklinegetChunkDigit()){\r\n                    this.linklinetipsChunkAction(currentChunk, rightChunk);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    // 防止使用锤子时能连线\r\n    linklinechunkShake:function(){\r\n        var self = this;\r\n        self.boardNode2.active = true;\r\n        self.node.getChildByName(\"bottom\").active = false;\r\n        if(this.isUsingHammer){\r\n            this.hammerTips.getChildByName(\"hammer\").active = true;\r\n            this.hammerTips.getChildByName(\"hammer\").runAction(cc.repeatForever(\r\n                cc.sequence(cc.scaleTo(0.5, 1), cc.scaleTo(0.5, 1.1))\r\n            ));\r\n        }\r\n        if(this.isUsingDouble){\r\n            this.hammerTips.getChildByName(\"double\").active = true;\r\n            this.hammerTips.getChildByName(\"double\").runAction(cc.repeatForever(\r\n                cc.sequence(cc.scaleTo(0.5, 1), cc.scaleTo(0.5, 1.1))\r\n            ));\r\n        }\r\n\r\n        this.board2_list = [];\r\n        for(var i = 0; i < self.ROW; i++){\r\n            this.board2_list[i] = [];\r\n            for(var j = 0; j < self.COL; j++){\r\n                //console.log(\"linklinechunkShake!!!\");\r\n                var cloneChunk = cc.instantiate(self.chunkPre);\r\n                var cloneChunkJS = cloneChunk.getComponent(\"linklinechunk\");\r\n                var curChunk = self.chunkList[i][j];\r\n                var curChunkJS = curChunk.getComponent(\"linklinechunk\");\r\n                curChunk.active = false;\r\n                cloneChunkJS.linklinesetColor_Digit(curChunkJS.linklinegetChunkColor(), curChunkJS.linklinegetChunkDigit());\r\n\r\n                if(cloneChunkJS.linklinegetChunkDigit() >= 1024 && cloneChunkJS.linklinegetChunkDigit() < 1000000){\r\n                    cloneChunk.getChildByName('kuang').active = true;\r\n                    cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                    cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                }\r\n                else if(cloneChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                    cloneChunk.getChildByName('kuang').active = true;\r\n                    cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                    cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                }\r\n                else{\r\n                    cloneChunk.getChildByName('kuang').active = false;\r\n                }\r\n\r\n                cloneChunk.setPosition(curChunk.getPosition());\r\n                self.boardNode2.addChild(cloneChunk);\r\n                self.board2_list[i].push(cloneChunk);\r\n            }\r\n        }\r\n\r\n        self.boardNode2.on(cc.Node.EventType.TOUCH_START, function(event){\r\n            var touchStartPos = self.boardNode2.convertToNodeSpaceAR(event.getLocation());\r\n            if(self.isUsingHammer){\r\n                self.linklinehammer(touchStartPos);\r\n            }\r\n            else if(self.isUsingDouble){\r\n                self.linklinedouble(touchStartPos);\r\n            }\r\n            if(!self.isUsingDouble && !self.isUsingHammer)\r\n                self.scheduleOnce(self.linklinedropChunkAct, 0.1);\r\n            self.scheduleOnce(self.linklinesaveBoardData, 0.4);\r\n            //console.log(this.boardNode2.childrenCount);\r\n        }, self.boardNode2);\r\n\r\n        if(this.isUsingHammer){\r\n            self.schedule(this.linklineboard2Shake, 0.1);\r\n        }\r\n        else if(this.isUsingDouble){\r\n            this.linklineboard2Ani();\r\n            this.schedule(this.linklineboard2Ani,1);\r\n        }\r\n    },\r\n    // 晃动 效果\r\n    linklineboard2Shake:function(){\r\n        var x = this.blockBlackX;\r\n        var y = this.blockBlackY;\r\n        this.boardNode2.runAction(\r\n            cc.sequence(cc.moveTo(0.05, cc.v2(x+2, y+2)), cc.moveTo(0.05, cc.v2(x-2, y-2))),\r\n        );\r\n    },\r\n    //涟漪效果\r\n    linklineboard2Ani:function(){\r\n        for(let i = 0;i < this.ROW;i++){\r\n            for(let j = 0;j < this.COL;j++){\r\n                let chunk = this.board2_list[i][j];\r\n                if(chunk.getComponent('linklinechunk').linklinegetChunkDigit() <= 8){\r\n                    var chunAni = cc.instantiate(this.chunkAni);\r\n                    chunAni.getChildByName(\"color\").color = chunk.getComponent(\"linklinechunk\").linklinegetChunkColor();\r\n                    chunAni.setPosition(chunk.getPosition());\r\n                    chunAni.zIndex = -1;\r\n                    this.boardNode2.addChild(chunAni);\r\n\r\n                    chunAni.runAction(cc.sequence(\r\n                        cc.spawn(cc.scaleTo(0.5, 1.8), cc.fadeOut(0.5)),\r\n                        cc.callFunc(function(){\r\n                            chunAni.destroy();\r\n                        })\r\n                    ));\r\n                }\r\n            }\r\n        }\r\n    },\r\n    // 锤子 \r\n    linklinehammer:function(point){\r\n        for(var i = 0; i < this.ROW; i++){\r\n            for(var j = 0; j < this.COL; j++){\r\n                // 点中的chunk\r\n                if(this.linklinechunk_fingerCollier(this.chunkList[i][j], point)){\r\n                    console.log(\"hammer!!!\");\r\n                    this.audioMgr.linklineplayUseHammer();\r\n\r\n                    var chunAni = cc.instantiate(this.chunkAni);\r\n                    chunAni.getChildByName(\"color\").color = this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkColor();\r\n                    chunAni.setPosition(this.chunkList[i][j].getPosition());\r\n                    chunAni.zIndex = -1;\r\n                    this.boardNode.addChild(chunAni);\r\n                    chunAni.runAction(cc.sequence(\r\n                        cc.spawn(cc.scaleTo(0.3, 1.8), cc.fadeOut(0.3)),\r\n                        cc.callFunc(function(){\r\n                            chunAni.destroy();\r\n                        })\r\n                    ));\r\n                    this.isUsingHammer = false;\r\n                    this.blockInputNode1.active = false;\r\n                    this.boardNode2.active = false;\r\n                    this.unschedule(this.linklineboard2Shake);\r\n                    this.boardNode2.setPosition(this.blockBlackX, this.blockBlackY);\r\n                    for(var m = 0; m < this.ROW; m++){\r\n                        for(var n = 0; n < this.COL; n++){\r\n                            this.board2_list[m][n].destroy();\r\n                            this.chunkList[m][n].active = true;\r\n                        }\r\n                    }\r\n                    this.chunkList[i][j].active = false;\r\n                    this.board2_list.length = 0;\r\n\r\n                    this.isHammer = false;\r\n                    cc.sys.localStorage.setItem('isHammer',0);\r\n                    var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n                    tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame2;\r\n                    //this.useHammerRemind.getChildByName(\"remind\").getChildByName(\"useHammerBtn\").getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame4;\r\n                    this.node.getChildByName(\"bottom\").active = true;\r\n                    this.hammerTips.getChildByName(\"hammer\").active = false;\r\n                    this.hammerTips.getChildByName(\"hammer\").stopAllActions();\r\n                    this.scheduleOnce(function(){\r\n                        // 每次连完检测是否游戏结束\r\n                        if(this.linklineisGameover()){\r\n                            // 锤子是否可用\r\n                            if(this.isHammer || this.doubleNum){\r\n                                this.audioMgr.linklineplayDialog()\r\n                                this.useHammerRemind.active = true;\r\n                                this.linklinemySlideIn(this.useHammerRemind.getChildByName(\"remind\"));\r\n                                \r\n                                if(this.isHammer && this.doubleNum){\r\n                                    this.hammer_btn.active = true;\r\n                                    this.hammer_btn.setPositionX(100);\r\n                                    this.double_btn.active = true;\r\n                                    this.double_btn.setPositionX(-100);\r\n                                }\r\n                                else if(this.isHammer){\r\n                                    this.hammer_btn.active = true;\r\n                                    this.hammer_btn.setPositionX(0);\r\n                                    this.double_btn.active = false;\r\n                                }\r\n                                else{\r\n                                    this.double_btn.active = true;\r\n                                    this.double_btn.setPositionX(0);\r\n                                    this.hammer_btn.active = false;\r\n                                }\r\n                            }\r\n                            else{\r\n                                //  每次死亡上传 游戏时间 和 最高分\r\n                                console.log(\"gameover!!!\");\r\n                                this.gameoverTimes++;\r\n                                cc.sys.localStorage.setItem(\"gameoverTimes\", this.gameoverTimes);\r\n                                this.blockInputNode2.active = true;\r\n                                this.linklinegameoverAni();\r\n                                this.scheduleOnce(function(){\r\n                                    this.blockInputNode2.active = false;\r\n                                }, 2.0);\r\n                                this.scheduleOnce(function(){\r\n                                    \r\n                                    // 满足条件 则 弹出复活界面\r\n                                    if(this.canRelive){\r\n                                        console.log('复活')\r\n                                        this.audioMgr.linklineplayRevive();\r\n                                        this.node.getChildByName(\"relive\").active = true;\r\n                                        this.linklinemySlideIn(this.node.getChildByName(\"relive\").getChildByName(\"reliveBtns\"));\r\n                                        // 倒计时5s\r\n                                        this.circleYellow.getComponent(cc.ProgressBar).progress = 1;\r\n                                        this.schedule(this.linklinecountTime, 0.01);\r\n                                        this.canRelive = false;\r\n                                    }\r\n                                    else{\r\n                                        // 死亡\r\n                                        if(!noAD && this.gameoverTimes%AD_CONFIG.DIED_TIMES == 0){\r\n                                            console.log(\"死亡广告!!!\");\r\n                                            if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIED_PRO/100){\r\n                                                console.log(\"full screen AD!!!\");\r\n                                                myADMgr.showFullScreenAD();\r\n                                            }\r\n                                        }\r\n                                        this.linklinegameEvaluate();\r\n                                        this.node.getChildByName(\"gameover\").active = true;\r\n                                        this.linklinemySlideIn(this.node.getChildByName(\"gameover\").getChildByName(\"gameoverBtns\"));\r\n                                    }\r\n            \r\n                                }, 2.0);\r\n                            }\r\n                        }\r\n                        else{\r\n                            // 保存棋盘数据\r\n                            console.log(\"continue!\");\r\n                            this.scheduleOnce(this.linklinesaveBoardData, 0.4);\r\n                            //console.log(this.boardNode.childrenCount);\r\n                            //console.log(this.boardNode2.childrenCount);\r\n                        }\r\n                    }, 0.4);\r\n                    break;\r\n                    //return;\r\n                    // ... 动效\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    // 按顺序重新排列\r\n    linklinesortChunk:function(){\r\n        var tempArray = new Array();\r\n        // 取出数值放入tempArray中\r\n        for(var i = 0; i < this.ROW; i++){\r\n            for(var j = 0; j < this.COL; j++){\r\n                tempArray.push(this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkDigit());\r\n            }\r\n        }\r\n        // 排序\r\n        for(var i = 0; i < tempArray.length-1; i++){\r\n            for(var j = i+1; j < tempArray.length; j++){\r\n                if(tempArray[i] > tempArray[j]){\r\n                    var tempNum = tempArray[i];\r\n                    tempArray[i] = tempArray[j];\r\n                    tempArray[j] = tempNum;\r\n                }\r\n            }\r\n        }\r\n        // 设置chunk位置、颜色\r\n        var index = this.ROW*this.COL;\r\n        for(var i = 0; i < this.ROW; i++){\r\n            for(var j = 0; j < this.COL; j++){\r\n                if(i%2 == 0){\r\n                    this.chunkList[i][j].getComponent(\"linklinechunk\").linklinesetColor_Digit(dataMgr.colorMgr.linklinegetColorById(tempArray[index-1]), tempArray[index-1]);\r\n\r\n                    if(this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkDigit() >= 1024 && this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkDigit() < 1000000){\r\n                        this.chunkList[i][j].getChildByName('kuang').active = true;\r\n                        this.chunkList[i][j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                        this.chunkList[i][j].getChildByName('kuang').color = this.chunkList[i][j].children[0].color;\r\n                    }\r\n                    else if(this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkDigit() >= 1000000){\r\n                        this.chunkList[i][j].getChildByName('kuang').active = true;\r\n                        this.chunkList[i][j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                        this.chunkList[i][j].getChildByName('kuang').color = this.chunkList[i][j].children[0].color;\r\n                    }\r\n                    else{\r\n                        this.chunkList[i][j].getChildByName('kuang').active = false;\r\n                    }\r\n                }\r\n                else{\r\n                    this.chunkList[i][4-j].getComponent(\"linklinechunk\").linklinesetColor_Digit(dataMgr.colorMgr.linklinegetColorById(tempArray[index-1]), tempArray[index-1]);\r\n\r\n                    if(this.chunkList[i][4-j].getComponent(\"linklinechunk\").linklinegetChunkDigit() >= 1024 && this.chunkList[i][4-j].getComponent(\"linklinechunk\").linklinegetChunkDigit() < 1000000){\r\n                        this.chunkList[i][4-j].getChildByName('kuang').active = true;\r\n                        this.chunkList[i][4-j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                        this.chunkList[i][4-j].getChildByName('kuang').color = this.chunkList[i][4-j].children[0].color;\r\n                    }\r\n                    else if(this.chunkList[i][4-j].getComponent(\"linklinechunk\").linklinegetChunkDigit() >= 1000000){\r\n                        this.chunkList[i][4-j].getChildByName('kuang').active = true;\r\n                        this.chunkList[i][4-j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                        this.chunkList[i][4-j].getChildByName('kuang').color = this.chunkList[i][4-j].children[0].color;\r\n                    }\r\n                    else{\r\n                        this.chunkList[i][4-j].getChildByName('kuang').active = false;\r\n                    }\r\n                }\r\n                index--;\r\n            }\r\n        }\r\n        this.linklinesaveBoardData();\r\n    },\r\n\r\n    // 重置按钮\r\n    linklineresetBtn:function(isCount){\r\n        this.audioMgr.linklineplayUi_btn();\r\n        this.doubleModeTimes = 0;\r\n        cc.sys.localStorage.setItem('doubleModeTimes',0);\r\n\r\n        cc.find('Canvas/game/bottom/double003').getComponent(cc.Sprite).spriteFrame = this.doubleSprFrame1;\r\n        cc.sys.localStorage.setItem('doubleNum',1);\r\n        this.doubleNum = 1;\r\n\r\n        this.linklinemySlideOut(cc.find(\"Canvas/game/pauseNode/pauseNodeBtns\"));\r\n        this.restartTimes++;\r\n        cc.sys.localStorage.setItem(\"restartTimes\", this.restartTimes);\r\n\r\n        this.breakRecord = false;\r\n        cc.sys.localStorage.setItem('breakRecord',0);\r\n        //复活次数重置\r\n        this.canRelive = true;\r\n        cc.sys.localStorage.setItem('canRelive',1);\r\n        let label = cc.find('Canvas/game/relive/reliveBtns/label').getComponent(cc.Label);\r\n        label.string = 5;\r\n\r\n        this.isGameOver = false;\r\n        cc.sys.localStorage.setItem('isGameOver',0);\r\n        // 分数重置\r\n        this.presentScore = 0;\r\n        this.pause_scores.getChildByName(\"presentScore\").getChildByName(\"score\").getComponent(cc.Label).string = (this.presentScore).toString();\r\n        dataMgr.myLocalMgr.presentScore = 0;\r\n        cc.sys.localStorage.setItem(\"presentScore\", 0);\r\n\r\n        this.circleColorLeft = dataMgr.colorMgr.linklinegetCircleColorByIndex(this.circleNumLeft % dataMgr.colorMgr.linklinegetCircleColorLength() + 1);\r\n        this.circleColorRight = dataMgr.colorMgr.linklinegetCircleColorByIndex(this.circleNumRight % dataMgr.colorMgr.linklinegetCircleColorLength() + 1);\r\n        this.levelUp.getChildByName(\"circleLeft\").color = this.circleColorLeft;\r\n\r\n        this.levelUp.getChildByName(\"circleLeft\").getChildByName(\"curLevel\").getComponent(cc.Label).string = (this.circleNumLeft).toString();\r\n        this.levelUp.getChildByName(\"circleRight\").color = this.circleColorRight;\r\n\r\n        this.levelUp.getChildByName(\"circleRight\").getChildByName(\"nextLevel\").getComponent(cc.Label).string = (this.circleNumRight).toString();\r\n\r\n        this.levelUp.getChildByName(\"progressBar\").getChildByName(\"bar\").color = this.circleColorLeft;\r\n        //this.levelUp.getChildByName(\"progressBar\").color = this.circleColorRight;\r\n        //this.levelUpTotal = 10;\r\n        this.percentBar = 0;\r\n        dataMgr.myLocalMgr.percentBar = 0;\r\n        cc.sys.localStorage.setItem(\"percentBar\", 0);\r\n        this.levelUp.getChildByName(\"progressBar\").getComponent(cc.ProgressBar).progress = this.percentBar;\r\n\r\n        // 锤子重置\r\n        this.isHammer = true;\r\n        cc.sys.localStorage.setItem('isHammer',1);\r\n        var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n        tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame1;\r\n        //this.useHammerRemind.getChildByName(\"remind\").getChildByName(\"useHammerBtn\").getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame3;\r\n        //this.isReviveHammer = false;\r\n        cc.sys.localStorage.setItem('isReviewHammer',0);\r\n\r\n        // 掉落完成才可执行其他操作\r\n        this.blockInputNode2.active = true;\r\n        // 停止掉落 执行 动效\r\n        for(var i = 0; i < this.ROW; i++){\r\n            for(var j = 0; j < this.COL; j++){\r\n                this.chunkList[i][j].active = false;\r\n                var moveTime = cc.pDistance(this.chunkList[i][j], this.chunkList[3][2]) / 800;\r\n                var cloneChunk = cc.instantiate(this.chunkPre);\r\n                cloneChunk.setPosition(this.chunkList[i][j].getPosition());\r\n                this.boardNode.addChild(cloneChunk);\r\n                cloneChunk.getComponent(\"linklinechunk\").linklinesetColor_Digit(this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkColor(), this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkDigit());\r\n                let cloneChunkJS = cloneChunk.getComponent(\"linklinechunk\");\r\n                if(cloneChunkJS.linklinegetChunkDigit() >= 1024 && cloneChunkJS.linklinegetChunkDigit() < 1000000){\r\n                    cloneChunk.getChildByName('kuang').active = true;\r\n                    cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                    cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                }\r\n                else if(cloneChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                    cloneChunk.getChildByName('kuang').active = true;\r\n                    cloneChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                    cloneChunk.getChildByName('kuang').color = cloneChunk.children[0].color;\r\n                }\r\n                else{\r\n                    cloneChunk.getChildByName('kuang').active = false;\r\n                }\r\n\r\n                //console.log(moveTime);\r\n                cloneChunk.runAction(cc.sequence(\r\n                    cc.spawn(cc.moveTo(moveTime, this.chunkList[3][2]), cc.scaleTo(moveTime, 0)),\r\n                    cc.callFunc(function(){\r\n                        cloneChunk.destroy();\r\n                    }),\r\n                ));\r\n            }\r\n        }\r\n        // 掉落效果\r\n        this.scheduleOnce(function(){\r\n            console.log(\"生成棋盘\")\r\n            let dropTime1 = cc.pDistance(this.chunkList[1][1], this.chunkList[0][1]) / 1200;\r\n            for(let i = 0; i < this.ROW; i++){\r\n                let dropTime = (i+1)*dropTime1;\r\n                for(let j = 0; j < this.COL; j++){\r\n                    let curChunk = this.chunkList[i][j];\r\n                    let curChunkJS = curChunk.getComponent(\"linklinechunk\");\r\n                    let dropChunk = this.linklinerandomChunk();\r\n                    dropChunk.setScale(0);\r\n                    let dropChunkJS = dropChunk.getComponent(\"linklinechunk\");\r\n                    dropChunk.setPosition(this.chunkList[i][j].getPosition());\r\n                    this.boardNode.addChild(dropChunk);\r\n                    dropChunk.runAction(cc.sequence(\r\n                        cc.scaleTo(0.4,1).easing(cc.easeBackOut()),\r\n                        //cc.scaleTo(0.1,1).easing(cc.easeBackOut()),\r\n                        //cc.delayTime(0.1*i),\r\n                        //cc.moveTo(dropTime, curChunk.getPosition()).easing(cc.easeOut(3.0)),\r\n                        cc.callFunc(function(){\r\n                            dropChunk.destroy();\r\n                        }),\r\n                        cc.callFunc(function(){\r\n                            curChunk.active = true;\r\n                            curChunkJS.linklinesetColor_Digit(dropChunkJS.linklinegetChunkColor(), dropChunkJS.linklinegetChunkDigit());\r\n                            if(curChunkJS.linklinegetChunkDigit() >= 1024 && curChunkJS.linklinegetChunkDigit() < 1000000){\r\n                                curChunk.getChildByName('kuang').active = true;\r\n                                curChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                                curChunk.getChildByName('kuang').color = curChunk.children[0].color;\r\n                            }\r\n                            else if(curChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                                curChunk.getChildByName('kuang').active = true;\r\n                                curChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                                curChunk.getChildByName('kuang').color = curChunk.children[0].color;\r\n                            }\r\n                            else{\r\n                                curChunk.getChildByName('kuang').active = false;\r\n                            }\r\n                        })\r\n                    ));\r\n                }\r\n            }\r\n        }, 0.6);\r\n        this.scheduleOnce(function(){\r\n            // 屏蔽 操作 关闭\r\n            this.blockInputNode2.active = false;\r\n            this.linklinesaveBoardData();\r\n            //console.log(this.boardNode2.childrenCount);\r\n        }, 1.2);\r\n        console.log(\"block input event!!!\");\r\n    },\r\n\r\n    // 锤子按钮\r\n    linklinehammerBtn:function(){\r\n        this.audioMgr.linklineplayUi_btn();\r\n        if(this.useHammerRemind.active)    \r\n            this.linklinemySlideOut(this.useHammerRemind.getChildByName(\"remind\"));\r\n\r\n        cc.find('Canvas/block').active = true;\r\n        this.scheduleOnce(function(){\r\n            cc.find('Canvas/block').active = false;\r\n            if(this.isHammer){\r\n                console.log(\"hammerBtn!!!\");\r\n                this.blockInputNode1.active = true;\r\n                this.isUsingHammer = true;\r\n                this.linklinechunkShake();\r\n            }\r\n            else{\r\n                this.toUseHammer = true;\r\n                this.toRelive = false;\r\n                this.doubleBtn = false;\r\n                console.log(\"prop award AD!!!\");\r\n                if(!cc.sys.isMobile){\r\n                    this.isHammer = true;\r\n                    var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n                    tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame1;\r\n                    //this.useHammerRemind.getChildByName(\"remind\").getChildByName(\"useHammerBtn\").getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame3;\r\n                }\r\n                else if(this.linklineisNetWork() && myADMgr.isRewardVideoAvailable()){\r\n                    myADMgr.showRewardVideoAD();\r\n                }\r\n                else{\r\n                    // ...\r\n                    console.log(\"unbelievable!!!\");\r\n                }\r\n            }\r\n        },0.2)\r\n    },\r\n\r\n    // 放弃复活机会\r\n    linklinegiveUpBtn:function(){\r\n        this.audioMgr.linklineplayUi_btn();\r\n        this.linklinemySlideOut(this.node.getChildByName(\"relive\").getChildByName(\"reliveBtns\"));\r\n        this.unschedule(this.linklinecountTime);\r\n        this.unschedule(this.linklinecountTime2,1);\r\n        this.linklinegameEvaluate();\r\n        this.scheduleOnce(function(){\r\n            this.node.getChildByName(\"gameover\").active = true;\r\n            this.linklinemySlideIn(this.node.getChildByName(\"gameover\").getChildByName(\"gameoverBtns\"));\r\n        },0.6)\r\n        if(!noAD && this.gameoverTimes%AD_CONFIG.DIED_TIMES == 0){\r\n            console.log(\"死亡广告!!!\");\r\n            if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIED_PRO/100){\r\n                console.log(\"full screen AD!!!\");\r\n                myADMgr.showFullScreenAD();\r\n            }\r\n        }\r\n    },\r\n\r\n    // 关闭升级提示框\r\n    linklinelevelUpSureBtn:function(){\r\n        if(this.node.getChildByName(\"levelUpMes\").getChildByName('TapToContinue').active == false)  return\r\n        //if(Number(new Date()) - this.levelUp_time < 2000)   return;\r\n        this.audioMgr.linklineplayUi_btn();\r\n        this.node.getChildByName(\"levelUpMes\").runAction(cc.fadeOut(0.3))\r\n        this.node.getChildByName(\"levelUpMes\").getChildByName('TapToContinue').active = false;\r\n        this.scheduleOnce(function(){\r\n            this.node.getChildByName(\"levelUpMes\").active = false;\r\n            this.node.getChildByName(\"levelUpMes\").opacity = 255;\r\n            this.node.getChildByName(\"levelUpMes\").getChildByName('block').opacity = 100;\r\n        var index = this.circleNumLeft % dataMgr.colorMgr.linklinegetCircleColorLength() + 1;\r\n        var str = \"star\" + index;\r\n        cc.sys.localStorage.setItem('loadingBar_index',index);\r\n        this.loadingBarNum = index;\r\n\r\n        this.star.getChildByName(str).getComponent(cc.ParticleSystem).resetSystem();\r\n\r\n\r\n        if(!noAD){\r\n            if(this.circleNumLeft == 5){\r\n                if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIALOG_PRO/100){\r\n                    myADMgr.showFullScreenAD();\r\n                }\r\n            }\r\n            else if(this.circleNumLeft > 5 && this.circleNumLeft <= 20){\r\n                if((this.circleNumLeft - 5) % 3 == 0){\r\n                    if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIALOG_PRO/100){\r\n                        myADMgr.showFullScreenAD();\r\n                    }\r\n                }\r\n            }\r\n            else if(this.circleNumLeft > 20 && this.circleNumLeft <= 50){\r\n                if(this.circleNumLeft % 2 == 0){\r\n                    if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIALOG_PRO/100){\r\n                        myADMgr.showFullScreenAD();\r\n                    }\r\n                }\r\n            }\r\n            else if(this.circleNumLeft > 50){\r\n                if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIALOG_PRO/100){\r\n                    myADMgr.showFullScreenAD();\r\n                }\r\n            }\r\n        }\r\n        },0.3)\r\n    },\r\n\r\n    adCallback (type, name) {\r\n        console.log(type, name);\r\n        console.log(\"game toRelive ad!!!\");\r\n        switch (type) {\r\n            case 'success_cache':\r\n                this.onCacheAd(name);\r\n                break;\r\n\r\n            case 'suceess_watch_reward':\r\n\r\n                if(this.toUseHammer){\r\n                    console.log('toUseHammer!!!');\r\n                    this.isHammer = true;\r\n                    this.toUseHammer = false;\r\n                    var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n                    tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame1;\r\n                    //this.useHammerRemind.getChildByName(\"remind\").getChildByName(\"useHammerBtn\").getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame3;\r\n                    console.log('获取锤子广告1')\r\n                }\r\n\r\n                if(this.toRelive){\r\n                    console.log('toRelive!!!');\r\n                    this.toRelive = false;\r\n                    this.node.getComponent(\"linklinegame\").linklinesortChunk();\r\n                    this.node.getChildByName(\"relive\").active = false;\r\n                }\r\n\r\n                // if(this.useHammerRemind_toUseHammer){\r\n                //     console.log('useHammerRemind_toUseHammer!!!');\r\n                //     this.isHammer = true;\r\n                //     var tempHammer = this.node.getChildByName(\"bottom\").getChildByName(\"hammer\");\r\n                //     tempHammer.getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame1;\r\n                //     this.useHammerRemind.getChildByName(\"remind\").getChildByName(\"useHammerBtn\").getComponent(cc.Sprite).spriteFrame = this.hammerSprFrame3;\r\n                //     console.log('获取锤子广告2')\r\n                // }\r\n\r\n                if(this.doubleBtn){\r\n                    this.doubleNum = 1;\r\n                    cc.sys.localStorage.setItem('doubleNum',1);\r\n                    cc.find('Canvas/game/bottom/double003').getComponent(cc.Sprite).spriteFrame = this.doubleSprFrame1;\r\n                    this.doubleBtn = false;\r\n                }\r\n            \r\n                break;\r\n            case 'adViewDidDismissScreen':\r\n                if(this.toRelive == true){\r\n                    //this.node.getChildByName(\"relive\").active = false;\r\n                    //this.linklinemySlideOut(this.node.getChildByName(\"relive\").getChildByName(\"reliveBtns\"));\r\n                    // this.unschedule(this.linklinecountTime);\r\n                    // this.unschedule(this.linklinecountTime2,1);\r\n                    this.linklinegameEvaluate();\r\n                    this.scheduleOnce(function(){\r\n                        this.node.getChildByName(\"gameover\").active = true;\r\n                        this.linklinemySlideIn(this.node.getChildByName(\"gameover\").getChildByName(\"gameoverBtns\"));\r\n                    },0.6)\r\n                    this.toRelive = false\r\n                }\r\n        }\r\n    },\r\n\r\n    onCacheAd(name) {\r\n        console.log('on cache')\r\n        console.log(name)\r\n        switch (name) {\r\n            case 'reward':\r\n                console.log(\"onCached reward!!!\");\r\n                break;\r\n            case 'bottombanner':\r\n                console.log(\"onCached bottombanner!!!\");\r\n                break;\r\n            case 'fullscreen':\r\n                console.log(\"onCached fullscreen!!!\");\r\n                break;\r\n            default: \r\n                break;\r\n        }\r\n    },\r\n\r\n    linklineisNetWork(){\r\n        if(cc.sys.os != cc.sys.OS_IOS) return;\r\n        var typeNetWork = jsb.reflection.callStaticMethod(\"Reachability\",\"getNetworkTyp\");\r\n        if(Number(typeNetWork) == -1){   // 没有网络\r\n            console.log(\"没有网络\");\r\n            return false;\r\n        }else{\r\n            console.log(\"有网络\");\r\n            return true;\r\n        }\r\n    },\r\n\r\n    // 弹窗出现\r\n    linklinemySlideIn:function(node){\r\n        node.stopAllActions();\r\n        node.parent.getChildByName('block').runAction(cc.fadeIn(0.3));\r\n        node.setPosition(0, 1000);\r\n        node.runAction(cc.moveTo(0.4, cc.v2(0, 0)).easing(cc.easeBackOut(0.8)));\r\n    },\r\n    // 弹窗消失\r\n    linklinemySlideOut:function(node){\r\n        node.parent.getChildByName('block').runAction(cc.fadeOut(0.3));\r\n        node.runAction(cc.sequence(\r\n            cc.moveTo(0.4, cc.v2(0, -1000)).easing(cc.easeBackIn(0.2)),\r\n            cc.callFunc(function(){\r\n                node.setPosition(0, 0);\r\n                node.parent.active = false;\r\n            })\r\n        ));\r\n    },\r\n\r\n    //棋子缩放\r\n    linklinechunkActStart(){\r\n        for(let i = 0; i < this.ROW; i++){\r\n            for(let j = 0; j < this.COL; j++){\r\n                let curChunk = this.chunkList[i][j];\r\n                curChunk.setScale(0);\r\n            }\r\n        }\r\n    },\r\n    linklinechunkAct(){\r\n        console.log('执行动画')\r\n        this.linklinestartTimeCount();\r\n        for(let i = 0; i < this.ROW; i++){\r\n            for(let j = 0; j < this.COL; j++){\r\n                let curChunk = this.chunkList[i][j];\r\n                curChunk.runAction(cc.scaleTo(0.5,1).easing(cc.easeBackOut()));\r\n            }\r\n        }\r\n    },\r\n\r\n    linklinedropChunkAct(){\r\n        let chunkNum = 0;\r\n        for(let j = 0; j < this.COL; j++){\r\n            for(let i = 0; i < this.ROW; i++){\r\n                let curChunk = this.chunkList[i][j];\r\n                let curChunkJS = curChunk.getComponent(\"linklinechunk\");\r\n                let showChunk = this.chunkList[i-chunkNum][j]\r\n                if(curChunk.active == false){\r\n                    chunkNum += 1;\r\n                }\r\n                else if(chunkNum > 0){\r\n                    let n = 1;\r\n                    if(curChunk.uuid == this.dropChunkID){\r\n                        n = 1.2;\r\n                        this.dropChunkID = 0\r\n                    }\r\n                    curChunk.active = false;\r\n                    let showChunkJs = showChunk.getComponent(\"linklinechunk\");\r\n                    let dropChunk = this.linklinerandomChunk();\r\n                    let dropChunkJS = dropChunk.getComponent(\"linklinechunk\");\r\n                    dropChunkJS.linklinesetColor_Digit(curChunkJS.linklinegetChunkColor(),curChunkJS.linklinegetChunkDigit());\r\n                    if(curChunkJS.linklinegetChunkDigit() >= 1024 && curChunkJS.linklinegetChunkDigit() < 1000000){\r\n                        dropChunk.getChildByName('kuang').active = true;\r\n                        dropChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                        dropChunk.getChildByName('kuang').color = dropChunk.children[0].color;\r\n                    }\r\n                    else if(curChunkJS.linklinegetChunkDigit() >= 1000000){\r\n                        dropChunk.getChildByName('kuang').active = true;\r\n                        dropChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                        dropChunk.getChildByName('kuang').color = dropChunk.children[0].color;\r\n                    }\r\n                    else{\r\n                        dropChunk.getChildByName('kuang').active = false;\r\n                    }\r\n                    dropChunk.setPosition(curChunk.getPosition());\r\n                    this.boardNode.addChild(dropChunk);\r\n                    dropChunk.runAction(cc.sequence(\r\n                        cc.spawn(cc.moveBy(0.2,cc.v2(0,-chunkNum*(2*this.chunkRadius + this.chunkGapY))).easing(cc.easeBackOut()),\r\n                        cc.scaleTo(0.2, n)),\r\n                        cc.callFunc(function(){\r\n                            dropChunk.destroy();\r\n                        }),\r\n                        cc.callFunc(function(){\r\n                            showChunk.active = true;\r\n                            showChunkJs.linklinesetColor_Digit(curChunkJS.linklinegetChunkColor(),curChunkJS.linklinegetChunkDigit());\r\n                            if(showChunkJs.linklinegetChunkDigit() >= 1024 && showChunkJs.linklinegetChunkDigit() < 1000000){\r\n                                showChunk.getChildByName('kuang').active = true;\r\n                                showChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                                showChunk.getChildByName('kuang').color = showChunk.children[0].color;\r\n                            }\r\n                            else if(showChunkJs.linklinegetChunkDigit() >= 1000000){\r\n                                showChunk.getChildByName('kuang').active = true;\r\n                                showChunk.getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                                showChunk.getChildByName('kuang').color = showChunk.children[0].color;\r\n                            }\r\n                            else{\r\n                                showChunk.getChildByName('kuang').active = false;\r\n                            }\r\n                        },this),\r\n                        cc.scaleTo(0.2, 1.0)\r\n                    ))\r\n                }\r\n                if(i == 5 && chunkNum != 0){\r\n                    for(let n = 0; n < chunkNum; n++){\r\n                        let showChunk = this.chunkList[6 - chunkNum + n][j];\r\n                        let showChunkJs = showChunk.getComponent(\"linklinechunk\");\r\n                        let dropChunk = this.linklinerandomChunk();\r\n                        this.boardNode.addChild(dropChunk);\r\n                        let dropChunkJS = dropChunk.getComponent(\"linklinechunk\");\r\n                        let x = this.chunkList[i][j].getPositionX();\r\n                        let y = this.chunkList[5][j].getPositionY() + (this.chunkGapY + 2 * this.chunkRadius) * (n + 1);\r\n                        dropChunk.setPosition(cc.v2(x,y));\r\n                        console.log(dropChunk.getPosition() + this.chunkList[5][j].getPosition())\r\n                        dropChunk.runAction(cc.sequence(\r\n                            cc.moveBy(0.2,cc.v2(0,-chunkNum*(2*this.chunkRadius + this.chunkGapY))).easing(cc.easeBackOut()),\r\n                            cc.callFunc(function(){\r\n                                dropChunk.destroy();\r\n                            }),\r\n                            cc.callFunc(function(){\r\n                                showChunk.active = true;\r\n                                showChunkJs.linklinesetColor_Digit(dropChunkJS.linklinegetChunkColor(),dropChunkJS.linklinegetChunkDigit());\r\n                            })\r\n                        ))\r\n                    }\r\n                    chunkNum = 0;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    linklinediscount(chunk){\r\n        for(let i = 0; i < this.ROW; i++){\r\n            for(let j = 0; j < this.COL; j++){\r\n                if(chunk.uuid == this.chunkList[i][j].uuid){\r\n                    this.iBk = i;\r\n                    this.jBk = j;\r\n                    cc.log(this.jBk)\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    linklinecloseDialouge(){\r\n        if(Number(new Date()) - this.dialouge_Time < 2000)  return;\r\n        this.audioMgr.linklineplayUi_btn();\r\n        let node = this.node.getChildByName('dialouge');\r\n        node.getChildByName('block').runAction(cc.sequence(\r\n            cc.fadeOut(0.3),\r\n            cc.callFunc(function(){\r\n                node.getChildByName('block').active = false;\r\n            })\r\n        ))\r\n        if(node.getChildByName('dialouge1').active){\r\n            node.getChildByName('dialouge1').runAction(cc.sequence(\r\n                cc.scaleTo(0.3,0).easing(cc.easeBackIn()),\r\n                cc.callFunc(function(){\r\n                    node.getChildByName('dialouge1').active = false;\r\n                })\r\n            ))\r\n            if(!isFiveStar && this.hightestScore != 1024){\r\n                this.scheduleOnce(function(){\r\n                    this.fiveStarNode.active = true;\r\n                    this.linklinemySlideIn(this.fiveStarNode.getChildByName(\"fiveStar\"));\r\n                },0.3)\r\n            }\r\n            else{\r\n                myGameCenterMgr.fiveStar();\r\n            }\r\n        }\r\n        if(node.getChildByName('dialouge2').active){\r\n            node.getChildByName('dialouge2').runAction(cc.sequence(\r\n                cc.scaleTo(0.3,0).easing(cc.easeBackIn()),\r\n                cc.callFunc(function(){\r\n                    node.getChildByName('dialouge2').active = false;\r\n                })\r\n            ))\r\n        }\r\n    },\r\n    \r\n    linklinedoubleButton(){\r\n        this.audioMgr.linklineplayUi_btn();\r\n        if(this.useHammerRemind.active)    \r\n            this.linklinemySlideOut(this.useHammerRemind.getChildByName(\"remind\"));\r\n\r\n        cc.find('Canvas/block').active = true;\r\n        this.scheduleOnce(function(){\r\n            cc.find('Canvas/block').active = false;\r\n            if(this.doubleNum){\r\n                this.doubleNum = 0;\r\n                cc.sys.localStorage.setItem('doubleNum',0);\r\n                this.blockInputNode1.active = true;\r\n                this.isUsingDouble = true;\r\n                this.linklinechunkShake();\r\n            }\r\n            else{\r\n                this.doubleBtn = true;\r\n                this.toUseHammer = false;\r\n                this.toRelive = false;\r\n                console.log(\"prop award AD!!!\");\r\n                if(!cc.sys.isMobile){\r\n                    this.doubleNum = 1;\r\n                    cc.sys.localStorage.setItem('doubleNum',1);\r\n                    cc.find('Canvas/game/bottom/double003').getComponent(cc.Sprite).spriteFrame = this.doubleSprFrame1;\r\n                }\r\n                else if(this.linklineisNetWork() && myADMgr.isRewardVideoAvailable()){\r\n                    myADMgr.showRewardVideoAD();\r\n                }\r\n            }\r\n        },0.2)\r\n    },\r\n    linklinedouble(point){\r\n        for(let i = 0;i < this.ROW;i++){\r\n            for(let j = 0;j < this.COL;j++){\r\n                if(this.linklinechunk_fingerCollier(this.chunkList[i][j], point)){\r\n                    let num = this.chunkList[i][j].getComponent('linklinechunk').linklinegetChunkDigit();\r\n                    if(num > 8) return;\r\n                    console.log(\"double!!!\");\r\n                    this.audioMgr.linklineplayDouble();\r\n                    num = 2*num\r\n                    this.chunkList[i][j].getComponent('linklinechunk').linklinesetColor_Digit(dataMgr.colorMgr.linklinegetColorById(num),num);\r\n                    if(this.chunkList[i][j].getComponent('linklinechunk').linklinegetChunkDigit() >= 1024 && this.chunkList[i][j].getComponent('linklinechunk').linklinegetChunkDigit() < 1000000){\r\n                        this.chunkList[i][j].getChildByName('kuang').active = true;\r\n                        this.chunkList[i][j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang1;\r\n                        this.chunkList[i][j].getChildByName('kuang').color = this.chunkList[i][j].children[0].color;\r\n                    }\r\n                    else if(this.chunkList[i][j].getComponent('linklinechunk').linklinegetChunkDigit() >= 1000000){\r\n                        this.chunkList[i][j].getChildByName('kuang').active = true;\r\n                        this.chunkList[i][j].getChildByName('kuang').getComponent(cc.Sprite).spriteFrame = this.kuang2;\r\n                        this.chunkList[i][j].getChildByName('kuang').color = this.chunkList[i][j].children[0].color;\r\n                    }\r\n                    else{\r\n                        this.chunkList[i][j].getChildByName('kuang').active = false;\r\n                    }\r\n\r\n                    var chunAni = cc.instantiate(this.chunkAni);\r\n                    chunAni.getChildByName(\"color\").color = this.chunkList[i][j].getComponent(\"linklinechunk\").linklinegetChunkColor();\r\n                    chunAni.setPosition(this.chunkList[i][j].getPosition());\r\n                    chunAni.zIndex = -1;\r\n                    this.boardNode.addChild(chunAni);\r\n                    chunAni.runAction(cc.sequence(\r\n                        cc.spawn(cc.scaleTo(0.3, 1.8), cc.fadeOut(0.3)),\r\n                        cc.callFunc(function(){\r\n                            chunAni.destroy();\r\n                        })\r\n                    ));\r\n                    this.isUsingDouble = false;\r\n                    this.blockInputNode1.active = false;\r\n                    this.boardNode2.active = false;\r\n                    this.unschedule(this.linklineboard2Ani);\r\n                    this.boardNode2.setPosition(this.blockBlackX, this.blockBlackY);\r\n                    this.boardNode2.removeAllChildren();\r\n                    for(var i = 0; i < this.ROW; i++){\r\n                        for(var j = 0; j < this.COL; j++){\r\n                            //this.board2_list[i][j].destroy();\r\n                            this.chunkList[i][j].active = true;\r\n                        }\r\n                    }\r\n                    this.board2_list.length = 0;\r\n                    this.hammerTips.getChildByName(\"double\").active = false;\r\n                    this.hammerTips.getChildByName(\"double\").stopAllActions();\r\n                    this.node.getChildByName(\"bottom\").active = true;\r\n                    cc.find('Canvas/game/bottom/double003').getComponent(cc.Sprite).spriteFrame = this.doubleSprFrame2;\r\n\r\n                    this.scheduleOnce(function(){\r\n                        // 每次连完检测是否游戏结束\r\n                        if(this.linklineisGameover()){\r\n                            // 锤子是否可用\r\n                            if(this.isHammer || this.doubleNum){\r\n                                this.audioMgr.linklineplayDialog()\r\n                                this.useHammerRemind.active = true;\r\n                                this.linklinemySlideIn(this.useHammerRemind.getChildByName(\"remind\"));\r\n                                \r\n                                if(this.isHammer && this.doubleNum){\r\n                                    this.hammer_btn.active = true;\r\n                                    this.hammer_btn.setPositionX(100);\r\n                                    this.double_btn.active = true;\r\n                                    this.double_btn.setPositionX(-100);\r\n                                }\r\n                                else if(this.isHammer){\r\n                                    this.hammer_btn.active = true;\r\n                                    this.hammer_btn.setPositionX(0);\r\n                                    this.double_btn.active = false;\r\n                                }\r\n                                else{\r\n                                    this.double_btn.active = true;\r\n                                    this.double_btn.setPositionX(0);\r\n                                    this.hammer_btn.active = false;\r\n                                }\r\n                            }\r\n                            else{\r\n                                //  每次死亡上传 游戏时间 和 最高分\r\n                                console.log(\"gameover!!!\");\r\n                                this.gameoverTimes++;\r\n                                cc.sys.localStorage.setItem(\"gameoverTimes\", this.gameoverTimes);\r\n                                this.blockInputNode2.active = true;\r\n                                this.linklinegameoverAni();\r\n                                this.scheduleOnce(function(){\r\n                                    this.blockInputNode2.active = false;\r\n                                }, 2.0);\r\n                                this.scheduleOnce(function(){\r\n                                    \r\n                                    // 满足条件 则 弹出复活界面\r\n                                    if(this.canRelive){\r\n                                        console.log('复活')\r\n                                        this.audioMgr.linklineplayRevive();\r\n                                        this.node.getChildByName(\"relive\").active = true;\r\n                                        this.linklinemySlideIn(this.node.getChildByName(\"relive\").getChildByName(\"reliveBtns\"));\r\n                                        // 倒计时5s\r\n                                        this.circleYellow.getComponent(cc.ProgressBar).progress = 1;\r\n                                        this.schedule(this.linklinecountTime, 0.01);\r\n                                        this.canRelive = false;\r\n                                    }\r\n                                    else{\r\n                                        // 死亡\r\n                                        if(!noAD && this.gameoverTimes%AD_CONFIG.DIED_TIMES == 0){\r\n                                            console.log(\"死亡广告!!!\");\r\n                                            if(myADMgr.isFullScreenAvailable() && Math.random() < AD_CONFIG.DIED_PRO/100){\r\n                                                console.log(\"full screen AD!!!\");\r\n                                                myADMgr.showFullScreenAD();\r\n                                            }\r\n                                        }\r\n                                        this.linklinegameEvaluate();\r\n                                        this.node.getChildByName(\"gameover\").active = true;\r\n                                        this.linklinemySlideIn(this.node.getChildByName(\"gameover\").getChildByName(\"gameoverBtns\"));\r\n                                    }\r\n            \r\n                                }, 2.0);\r\n                            }\r\n                        }\r\n                        else{\r\n                            // 保存棋盘数据\r\n                            console.log(\"continue!\");\r\n                            this.scheduleOnce(this.linklinesaveBoardData, 0.4);\r\n                            //console.log(this.boardNode.childrenCount);\r\n                            //console.log(this.boardNode2.childrenCount);\r\n                        }\r\n                    }, 0.3);\r\n\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    linklineplAct(){\r\n        let node1 = cc.instantiate(this.closePlPre)\r\n        let node2 = cc.instantiate(this.closePlPre)\r\n        let node3 = cc.instantiate(this.closePlPre)\r\n        let node4 = cc.instantiate(this.closePlPre)\r\n        \r\n        this.node.addChild(node1);\r\n        this.node.addChild(node2);\r\n        this.node.addChild(node3);\r\n        this.node.addChild(node4);\r\n\r\n        node1.getComponent(cc.ParticleSystem).file = cc.url.raw('resources/linklineplist/linklineprogress/linklinecloseParticle' + this.closePl_num + '.plist');\r\n        node2.getComponent(cc.ParticleSystem).file = cc.url.raw('resources/linklineplist/linklineprogress/linklinecloseParticle' + this.closePl_num + '.plist');\r\n        node3.getComponent(cc.ParticleSystem).file = cc.url.raw('resources/linklineplist/linklineprogress/linklinecloseParticle' + this.closePl_num + '.plist');\r\n        node4.getComponent(cc.ParticleSystem).file = cc.url.raw('resources/linklineplist/linklineprogress/linklinecloseParticle' + this.closePl_num + '.plist');\r\n        console.log('播放粒子特效')\r\n        node1.setPosition(cc.v2(-281,-145));\r\n        node1.active = true\r\n        node1.getComponent(cc.ParticleSystem).resetSystem();\r\n        let bizier1 = [cc.v2(-281,93),cc.v2(-274.5,160.5),cc.v2(-208,168)]\r\n        node1.runAction(cc.sequence(\r\n            cc.moveTo(0.2,cc.v2(-281,93)),\r\n            cc.bezierTo(0.2,bizier1),\r\n            cc.moveTo(0.2,cc.v2(0,168)),\r\n            cc.callFunc(function(){\r\n                node1.getComponent(cc.ParticleSystem).stopSystem();\r\n            }),\r\n            cc.delayTime(1.5),\r\n            cc.callFunc(function(){\r\n                node1.destroy()\r\n            })\r\n        ));\r\n\r\n        node2.setPosition(cc.v2(281,-145));\r\n        node2.active = true\r\n        node2.getComponent(cc.ParticleSystem).resetSystem();\r\n        let bizier2 = [cc.v2(281,93),cc.v2(274.5,160.5),cc.v2(208,168)]\r\n        node2.runAction(cc.sequence(\r\n            cc.moveTo(0.2,cc.v2(281,93)),\r\n            cc.bezierTo(0.2,bizier2),\r\n            cc.moveTo(0.2,cc.v2(0,168)),\r\n            cc.callFunc(function(){\r\n                node2.getComponent(cc.ParticleSystem).stopSystem();\r\n            }),\r\n            cc.delayTime(1.5),\r\n            cc.callFunc(function(){\r\n                node2.destroy()\r\n            })\r\n        ))\r\n\r\n        node3.setPosition(cc.v2(-281,-145));\r\n        node3.active = true\r\n        node3.getComponent(cc.ParticleSystem).resetSystem();\r\n        let bizier3 = [cc.v2(-281,-383),cc.v2(-274.5,-475.5),cc.v2(-208,-458)]\r\n        node3.runAction(cc.sequence(\r\n            cc.moveTo(0.2,cc.v2(-281,-383)),\r\n            cc.bezierTo(0.2,bizier3),\r\n            cc.moveTo(0.2,cc.v2(0,-458)),\r\n            cc.callFunc(function(){\r\n                node3.getComponent(cc.ParticleSystem).stopSystem();\r\n            }),\r\n            cc.delayTime(1.5),\r\n            cc.callFunc(function(){\r\n                node3.destroy()\r\n            })\r\n        ))\r\n\r\n        node4.setPosition(cc.v2(281,-145));\r\n        node4.active = true\r\n        node4.getComponent(cc.ParticleSystem).resetSystem();\r\n        let bizier4 = [cc.v2(281,-383),cc.v2(274.5,-475.5),cc.v2(208,-458)]\r\n        node4.runAction(cc.sequence(\r\n            cc.moveTo(0.2,cc.v2(281,-383)),\r\n            cc.bezierTo(0.2,bizier4),\r\n            cc.moveTo(0.2,cc.v2(0,-458)),\r\n            cc.callFunc(function(){\r\n                node4.getComponent(cc.ParticleSystem).stopSystem();\r\n            }),\r\n            cc.delayTime(1.5),\r\n            cc.callFunc(function(){\r\n                node4.destroy()\r\n            })\r\n        ))\r\n    },\r\n\r\n    linklinebarAct(num){\r\n        this.loadingBar.setPositionX(-169.5 + this.percentBar * 339);\r\n        this.loadingBar.children[this.loadingBarNum-1].getComponent(cc.ParticleSystem).resetSystem();\r\n        this.loadingBar.runAction(cc.sequence(\r\n            cc.moveBy(num * 0.025,cc.v2(num*(1/this.levelUpTotal)*339 + 40,0)),\r\n            cc.callFunc(function(){\r\n                this.loadingBar.children[this.loadingBarNum-1].getComponent(cc.ParticleSystem).stopSystem();\r\n            },this)\r\n            ));\r\n    }\r\n});\r\n"]}